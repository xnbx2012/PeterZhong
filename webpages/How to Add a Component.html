<!DOCTYPE html>
<!-- saved from url=(0083)https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>How to Add a Component</title><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon6.ico"><style type="text/css" nonce=""><link rel="icon" href="icon.png" type="image/x-icon" />
      body {
        font-family: arial, sans, sans-serif;
        margin: 0;
      }

      iframe {
        border: 0;
        frameborder: 0;
        height: 100%;
        width: 100%;
      }

      #header, #footer {
        background: #f0f0f0;
        padding: 10px 10px;
      }

      #header {
        border-bottom: 1px #ccc solid;
      }

      #footer {
        border-top: 1px #ccc solid;
        border-bottom: 1px #ccc solid;
        font-size: 13;
      }

      #contents {
        margin: 6px;
      }

      .dash {
        padding: 0 6px;
      }
    </style></head><body><div id="header">How to Add a Component</div><div id="contents"><style type="text/css">.lst-kix_dqjb6go70mwb-0>li:before{content:"\0025cf  "}.lst-kix_vldu5pp03bqb-5>li:before{content:"\0025a0  "}.lst-kix_vldu5pp03bqb-7>li:before{content:"\0025cb  "}.lst-kix_dqjb6go70mwb-2>li:before{content:"\0025a0  "}.lst-kix_4yg1z8zdcqv-0>li:before{content:"\0025cf  "}.lst-kix_vldu5pp03bqb-4>li:before{content:"\0025cb  "}.lst-kix_vldu5pp03bqb-8>li:before{content:"\0025a0  "}.lst-kix_d1xklwgxr5i4-0>li:before{content:"\0025cf  "}.lst-kix_4yg1z8zdcqv-5>li:before{content:"\0025a0  "}.lst-kix_dqjb6go70mwb-1>li:before{content:"\0025cb  "}.lst-kix_4yg1z8zdcqv-6>li:before{content:"\0025cf  "}.lst-kix_c43lravhtfhh-3>li:before{content:"\0025cf  "}.lst-kix_vldu5pp03bqb-6>li:before{content:"\0025cf  "}.lst-kix_4yg1z8zdcqv-7>li:before{content:"\0025cb  "}ul.lst-kix_o669e1g9tkoj-2{list-style-type:none}.lst-kix_d1xklwgxr5i4-6>li:before{content:"\0025cf  "}ul.lst-kix_o669e1g9tkoj-1{list-style-type:none}ul.lst-kix_o669e1g9tkoj-0{list-style-type:none}.lst-kix_d1xklwgxr5i4-7>li:before{content:"\0025cb  "}.lst-kix_bovizmomu0la-5>li:before{content:"\0025a0  "}.lst-kix_bovizmomu0la-7>li:before{content:"\0025cb  "}ul.lst-kix_o669e1g9tkoj-6{list-style-type:none}.lst-kix_c43lravhtfhh-2>li:before{content:"\0025a0  "}.lst-kix_d1xklwgxr5i4-8>li:before{content:"\0025a0  "}ul.lst-kix_o669e1g9tkoj-5{list-style-type:none}.lst-kix_4yg1z8zdcqv-8>li:before{content:"\0025a0  "}ul.lst-kix_o669e1g9tkoj-4{list-style-type:none}.lst-kix_c43lravhtfhh-1>li:before{content:"\0025cb  "}ul.lst-kix_o669e1g9tkoj-3{list-style-type:none}.lst-kix_vldu5pp03bqb-0>li:before{content:"\0025cf  "}.lst-kix_bovizmomu0la-4>li:before{content:"\0025cb  "}.lst-kix_bovizmomu0la-8>li:before{content:"\0025a0  "}.lst-kix_c43lravhtfhh-0>li:before{content:"\0025cf  "}.lst-kix_vldu5pp03bqb-1>li:before{content:"\0025cb  "}.lst-kix_vldu5pp03bqb-3>li:before{content:"\0025cf  "}.lst-kix_vldu5pp03bqb-2>li:before{content:"\0025a0  "}.lst-kix_bovizmomu0la-6>li:before{content:"\0025cf  "}ul.lst-kix_stykl9wpd8tc-1{list-style-type:none}ul.lst-kix_stykl9wpd8tc-2{list-style-type:none}.lst-kix_5xrn4f2v5mdj-2>li:before{content:"\0025a0  "}.lst-kix_5xrn4f2v5mdj-3>li:before{content:"\0025cf  "}ul.lst-kix_stykl9wpd8tc-3{list-style-type:none}ul.lst-kix_stykl9wpd8tc-4{list-style-type:none}.lst-kix_5xrn4f2v5mdj-1>li:before{content:"\0025cb  "}.lst-kix_5xrn4f2v5mdj-5>li:before{content:"\0025a0  "}ul.lst-kix_stykl9wpd8tc-0{list-style-type:none}.lst-kix_5xrn4f2v5mdj-4>li:before{content:"\0025cb  "}.lst-kix_c43lravhtfhh-4>li:before{content:"\0025cb  "}.lst-kix_7dzx21jqlj4g-8>li:before{content:"\0025a0  "}.lst-kix_dqjb6go70mwb-7>li:before{content:"\0025cb  "}.lst-kix_dqjb6go70mwb-8>li:before{content:"\0025a0  "}.lst-kix_d1xklwgxr5i4-5>li:before{content:"\0025a0  "}.lst-kix_c43lravhtfhh-6>li:before{content:"\0025cf  "}.lst-kix_d1xklwgxr5i4-4>li:before{content:"\0025cb  "}.lst-kix_dqjb6go70mwb-6>li:before{content:"\0025cf  "}.lst-kix_c43lravhtfhh-5>li:before{content:"\0025a0  "}.lst-kix_7dzx21jqlj4g-5>li:before{content:"\0025a0  "}.lst-kix_c43lravhtfhh-8>li:before{content:"\0025a0  "}.lst-kix_d1xklwgxr5i4-2>li:before{content:"\0025a0  "}.lst-kix_dqjb6go70mwb-3>li:before{content:"\0025cf  "}.lst-kix_dqjb6go70mwb-4>li:before{content:"\0025cb  "}.lst-kix_5xrn4f2v5mdj-6>li:before{content:"\0025cf  "}.lst-kix_5xrn4f2v5mdj-7>li:before{content:"\0025cb  "}.lst-kix_d1xklwgxr5i4-1>li:before{content:"\0025cb  "}.lst-kix_d1xklwgxr5i4-3>li:before{content:"\0025cf  "}.lst-kix_7dzx21jqlj4g-6>li:before{content:"\0025cf  "}.lst-kix_dqjb6go70mwb-5>li:before{content:"\0025a0  "}.lst-kix_5xrn4f2v5mdj-8>li:before{content:"\0025a0  "}.lst-kix_c43lravhtfhh-7>li:before{content:"\0025cb  "}.lst-kix_7dzx21jqlj4g-7>li:before{content:"\0025cb  "}.lst-kix_gzsatngjqsgd-2>li:before{content:"\0025a0  "}.lst-kix_gzsatngjqsgd-4>li:before{content:"\0025cb  "}.lst-kix_7dzx21jqlj4g-0>li:before{content:"\0025cf  "}.lst-kix_7dzx21jqlj4g-2>li:before{content:"\0025a0  "}.lst-kix_gzsatngjqsgd-1>li:before{content:"\0025cb  "}.lst-kix_gzsatngjqsgd-5>li:before{content:"\0025a0  "}.lst-kix_7dzx21jqlj4g-1>li:before{content:"\0025cb  "}.lst-kix_7dzx21jqlj4g-4>li:before{content:"\0025cb  "}.lst-kix_gzsatngjqsgd-0>li:before{content:"\0025cf  "}.lst-kix_gzsatngjqsgd-6>li:before{content:"\0025cf  "}.lst-kix_gzsatngjqsgd-8>li:before{content:"\0025a0  "}.lst-kix_7dzx21jqlj4g-3>li:before{content:"\0025cf  "}.lst-kix_gzsatngjqsgd-7>li:before{content:"\0025cb  "}ul.lst-kix_stykl9wpd8tc-5{list-style-type:none}ul.lst-kix_stykl9wpd8tc-6{list-style-type:none}ul.lst-kix_stykl9wpd8tc-7{list-style-type:none}ul.lst-kix_stykl9wpd8tc-8{list-style-type:none}.lst-kix_gzsatngjqsgd-3>li:before{content:"\0025cf  "}.lst-kix_bovizmomu0la-0>li:before{content:"\0025cf  "}ul.lst-kix_k6el25i0u5sb-7{list-style-type:none}ul.lst-kix_gzsatngjqsgd-3{list-style-type:none}ul.lst-kix_k6el25i0u5sb-6{list-style-type:none}ul.lst-kix_gzsatngjqsgd-2{list-style-type:none}ul.lst-kix_o669e1g9tkoj-8{list-style-type:none}ul.lst-kix_gzsatngjqsgd-1{list-style-type:none}ul.lst-kix_k6el25i0u5sb-8{list-style-type:none}ul.lst-kix_o669e1g9tkoj-7{list-style-type:none}ul.lst-kix_gzsatngjqsgd-0{list-style-type:none}.lst-kix_bovizmomu0la-1>li:before{content:"\0025cb  "}.lst-kix_bovizmomu0la-3>li:before{content:"\0025cf  "}.lst-kix_bovizmomu0la-2>li:before{content:"\0025a0  "}ul.lst-kix_bovizmomu0la-1{list-style-type:none}ul.lst-kix_bovizmomu0la-0{list-style-type:none}ul.lst-kix_k6el25i0u5sb-1{list-style-type:none}ul.lst-kix_bovizmomu0la-3{list-style-type:none}ul.lst-kix_k6el25i0u5sb-0{list-style-type:none}ul.lst-kix_bovizmomu0la-2{list-style-type:none}ul.lst-kix_k6el25i0u5sb-3{list-style-type:none}ul.lst-kix_bovizmomu0la-5{list-style-type:none}ul.lst-kix_k6el25i0u5sb-2{list-style-type:none}ul.lst-kix_bovizmomu0la-4{list-style-type:none}ul.lst-kix_k6el25i0u5sb-5{list-style-type:none}ul.lst-kix_bovizmomu0la-7{list-style-type:none}ul.lst-kix_k6el25i0u5sb-4{list-style-type:none}ul.lst-kix_bovizmomu0la-6{list-style-type:none}ul.lst-kix_bovizmomu0la-8{list-style-type:none}.lst-kix_po45rieugyg2-5>li:before{content:"\0025a0  "}.lst-kix_po45rieugyg2-7>li:before{content:"\0025cb  "}.lst-kix_po45rieugyg2-1>li:before{content:"\0025cb  "}.lst-kix_p4r1wqvqk4hn-7>li:before{content:"\0025cb  "}.lst-kix_po45rieugyg2-3>li:before{content:"\0025cf  "}.lst-kix_p4r1wqvqk4hn-5>li:before{content:"\0025a0  "}.lst-kix_p4r1wqvqk4hn-3>li:before{content:"\0025cf  "}.lst-kix_xzbnyyg4kqxe-8>li:before{content:"\0025a0  "}.lst-kix_p4r1wqvqk4hn-1>li:before{content:"\0025cb  "}ul.lst-kix_482voacspu5m-1{list-style-type:none}ul.lst-kix_482voacspu5m-0{list-style-type:none}.lst-kix_482voacspu5m-7>li:before{content:"\0025cb  "}ul.lst-kix_482voacspu5m-5{list-style-type:none}ul.lst-kix_482voacspu5m-4{list-style-type:none}ul.lst-kix_482voacspu5m-3{list-style-type:none}ul.lst-kix_482voacspu5m-2{list-style-type:none}.lst-kix_stykl9wpd8tc-5>li:before{content:"\0025a0  "}ul.lst-kix_482voacspu5m-8{list-style-type:none}.lst-kix_482voacspu5m-5>li:before{content:"\0025a0  "}ul.lst-kix_482voacspu5m-7{list-style-type:none}.lst-kix_xzbnyyg4kqxe-2>li:before{content:"\0025a0  "}ul.lst-kix_482voacspu5m-6{list-style-type:none}.lst-kix_482voacspu5m-3>li:before{content:"\0025cf  "}.lst-kix_xzbnyyg4kqxe-4>li:before{content:"\0025cb  "}.lst-kix_stykl9wpd8tc-3>li:before{content:"\0025cf  "}.lst-kix_stykl9wpd8tc-1>li:before{content:"\0025cb  "}.lst-kix_482voacspu5m-1>li:before{content:"\0025cb  "}.lst-kix_xzbnyyg4kqxe-6>li:before{content:"\0025cf  "}.lst-kix_stykl9wpd8tc-7>li:before{content:"\0025cb  "}.lst-kix_4yg1z8zdcqv-4>li:before{content:"\0025cb  "}.lst-kix_xzbnyyg4kqxe-0>li:before{content:"\0025cf  "}.lst-kix_4yg1z8zdcqv-2>li:before{content:"\0025a0  "}ul.lst-kix_vldu5pp03bqb-0{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-8{list-style-type:none}ul.lst-kix_vldu5pp03bqb-2{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-7{list-style-type:none}ul.lst-kix_vldu5pp03bqb-1{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-6{list-style-type:none}ul.lst-kix_vldu5pp03bqb-4{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-5{list-style-type:none}ul.lst-kix_vldu5pp03bqb-3{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-4{list-style-type:none}ul.lst-kix_vldu5pp03bqb-6{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-3{list-style-type:none}ul.lst-kix_vldu5pp03bqb-5{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-2{list-style-type:none}ul.lst-kix_vldu5pp03bqb-8{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-1{list-style-type:none}ul.lst-kix_vldu5pp03bqb-7{list-style-type:none}ul.lst-kix_p4r1wqvqk4hn-0{list-style-type:none}.lst-kix_k6el25i0u5sb-4>li:before{content:"\0025cb  "}.lst-kix_o669e1g9tkoj-4>li:before{content:"\0025cb  "}.lst-kix_k6el25i0u5sb-2>li:before{content:"\0025a0  "}.lst-kix_k6el25i0u5sb-3>li:before{content:"\0025cf  "}.lst-kix_o669e1g9tkoj-2>li:before{content:"\0025a0  "}.lst-kix_k6el25i0u5sb-1>li:before{content:"\0025cb  "}.lst-kix_o669e1g9tkoj-3>li:before{content:"\0025cf  "}.lst-kix_o669e1g9tkoj-0>li:before{content:"\0025cf  "}.lst-kix_k6el25i0u5sb-0>li:before{content:"\0025cf  "}.lst-kix_o669e1g9tkoj-1>li:before{content:"\0025cb  "}.lst-kix_o669e1g9tkoj-5>li:before{content:"\0025a0  "}.lst-kix_o669e1g9tkoj-6>li:before{content:"\0025cf  "}.lst-kix_k6el25i0u5sb-5>li:before{content:"\0025a0  "}.lst-kix_o669e1g9tkoj-7>li:before{content:"\0025cb  "}.lst-kix_o669e1g9tkoj-8>li:before{content:"\0025a0  "}.lst-kix_ks57f36ukaib-8>li:before{content:"\0025a0  "}.lst-kix_k6el25i0u5sb-6>li:before{content:"\0025cf  "}.lst-kix_k6el25i0u5sb-7>li:before{content:"\0025cb  "}.lst-kix_k6el25i0u5sb-8>li:before{content:"\0025a0  "}.lst-kix_ks57f36ukaib-7>li:before{content:"\0025cb  "}.lst-kix_3mihu5srrxcs-7>li:before{content:"\0025cb  "}.lst-kix_ks57f36ukaib-4>li:before{content:"\0025cb  "}.lst-kix_ks57f36ukaib-6>li:before{content:"\0025cf  "}.lst-kix_ks57f36ukaib-2>li:before{content:"\0025a0  "}.lst-kix_ks57f36ukaib-5>li:before{content:"\0025a0  "}.lst-kix_3mihu5srrxcs-6>li:before{content:"\0025cf  "}ul.lst-kix_d1xklwgxr5i4-6{list-style-type:none}ul.lst-kix_d1xklwgxr5i4-5{list-style-type:none}ul.lst-kix_d1xklwgxr5i4-4{list-style-type:none}ul.lst-kix_d1xklwgxr5i4-3{list-style-type:none}.lst-kix_3mihu5srrxcs-1>li:before{content:"\0025cb  "}ul.lst-kix_d1xklwgxr5i4-2{list-style-type:none}.lst-kix_ks57f36ukaib-3>li:before{content:"\0025cf  "}ul.lst-kix_d1xklwgxr5i4-1{list-style-type:none}.lst-kix_3mihu5srrxcs-0>li:before{content:"\0025cf  "}.lst-kix_3mihu5srrxcs-8>li:before{content:"\0025a0  "}ul.lst-kix_d1xklwgxr5i4-0{list-style-type:none}ul.lst-kix_po45rieugyg2-5{list-style-type:none}ul.lst-kix_ks57f36ukaib-1{list-style-type:none}ul.lst-kix_po45rieugyg2-6{list-style-type:none}ul.lst-kix_ks57f36ukaib-0{list-style-type:none}ul.lst-kix_po45rieugyg2-7{list-style-type:none}ul.lst-kix_ks57f36ukaib-3{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-7{list-style-type:none}ul.lst-kix_po45rieugyg2-8{list-style-type:none}ul.lst-kix_ks57f36ukaib-2{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-8{list-style-type:none}ul.lst-kix_d1xklwgxr5i4-8{list-style-type:none}ul.lst-kix_d1xklwgxr5i4-7{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-1{list-style-type:none}.lst-kix_ks57f36ukaib-0>li:before{content:"\0025cf  "}.lst-kix_ks57f36ukaib-1>li:before{content:"\0025cb  "}ul.lst-kix_ks57f36ukaib-8{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-2{list-style-type:none}ul.lst-kix_po45rieugyg2-0{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-0{list-style-type:none}ul.lst-kix_po45rieugyg2-1{list-style-type:none}ul.lst-kix_ks57f36ukaib-5{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-5{list-style-type:none}ul.lst-kix_po45rieugyg2-2{list-style-type:none}ul.lst-kix_ks57f36ukaib-4{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-6{list-style-type:none}ul.lst-kix_po45rieugyg2-3{list-style-type:none}ul.lst-kix_ks57f36ukaib-7{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-3{list-style-type:none}ul.lst-kix_po45rieugyg2-4{list-style-type:none}ul.lst-kix_ks57f36ukaib-6{list-style-type:none}ul.lst-kix_7dzx21jqlj4g-4{list-style-type:none}.lst-kix_70mw4a2yzwhg-3>li:before{content:"\0025cf  "}.lst-kix_ct6heytdumu8-8>li:before{content:"\0025a0  "}.lst-kix_70mw4a2yzwhg-1>li:before{content:"\0025cb  "}.lst-kix_70mw4a2yzwhg-5>li:before{content:"\0025a0  "}ul.lst-kix_70mw4a2yzwhg-7{list-style-type:none}ul.lst-kix_70mw4a2yzwhg-6{list-style-type:none}.lst-kix_70mw4a2yzwhg-2>li:before{content:"\0025a0  "}.lst-kix_70mw4a2yzwhg-6>li:before{content:"\0025cf  "}ul.lst-kix_70mw4a2yzwhg-8{list-style-type:none}.lst-kix_ct6heytdumu8-5>li:before{content:"\0025a0  "}ul.lst-kix_70mw4a2yzwhg-3{list-style-type:none}ul.lst-kix_70mw4a2yzwhg-2{list-style-type:none}ul.lst-kix_70mw4a2yzwhg-5{list-style-type:none}ul.lst-kix_70mw4a2yzwhg-4{list-style-type:none}.lst-kix_ct6heytdumu8-6>li:before{content:"\0025cf  "}ul.lst-kix_70mw4a2yzwhg-1{list-style-type:none}.lst-kix_70mw4a2yzwhg-4>li:before{content:"\0025cb  "}ul.lst-kix_70mw4a2yzwhg-0{list-style-type:none}.lst-kix_ct6heytdumu8-7>li:before{content:"\0025cb  "}.lst-kix_ct6heytdumu8-0>li:before{content:"\0025cf  "}.lst-kix_ct6heytdumu8-2>li:before{content:"\0025a0  "}.lst-kix_3mihu5srrxcs-2>li:before{content:"\0025a0  "}.lst-kix_ct6heytdumu8-1>li:before{content:"\0025cb  "}.lst-kix_70mw4a2yzwhg-7>li:before{content:"\0025cb  "}.lst-kix_3mihu5srrxcs-3>li:before{content:"\0025cf  "}.lst-kix_ct6heytdumu8-4>li:before{content:"\0025cb  "}.lst-kix_3mihu5srrxcs-5>li:before{content:"\0025a0  "}.lst-kix_70mw4a2yzwhg-8>li:before{content:"\0025a0  "}.lst-kix_3mihu5srrxcs-4>li:before{content:"\0025cb  "}.lst-kix_ct6heytdumu8-3>li:before{content:"\0025cf  "}ul.lst-kix_4yg1z8zdcqv-8{list-style-type:none}ul.lst-kix_ct6heytdumu8-7{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-8{list-style-type:none}ul.lst-kix_ct6heytdumu8-8{list-style-type:none}.lst-kix_po45rieugyg2-8>li:before{content:"\0025a0  "}ul.lst-kix_5xrn4f2v5mdj-7{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-6{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-5{list-style-type:none}ul.lst-kix_ct6heytdumu8-3{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-4{list-style-type:none}ul.lst-kix_ct6heytdumu8-4{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-3{list-style-type:none}ul.lst-kix_ct6heytdumu8-5{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-2{list-style-type:none}ul.lst-kix_ct6heytdumu8-6{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-1{list-style-type:none}ul.lst-kix_5xrn4f2v5mdj-0{list-style-type:none}ul.lst-kix_ct6heytdumu8-0{list-style-type:none}.lst-kix_po45rieugyg2-6>li:before{content:"\0025cf  "}ul.lst-kix_ct6heytdumu8-1{list-style-type:none}ul.lst-kix_ct6heytdumu8-2{list-style-type:none}ul.lst-kix_gzsatngjqsgd-8{list-style-type:none}ul.lst-kix_gzsatngjqsgd-7{list-style-type:none}.lst-kix_p4r1wqvqk4hn-8>li:before{content:"\0025a0  "}ul.lst-kix_gzsatngjqsgd-6{list-style-type:none}.lst-kix_po45rieugyg2-0>li:before{content:"\0025cf  "}.lst-kix_po45rieugyg2-4>li:before{content:"\0025cb  "}ul.lst-kix_gzsatngjqsgd-5{list-style-type:none}ul.lst-kix_gzsatngjqsgd-4{list-style-type:none}.lst-kix_p4r1wqvqk4hn-6>li:before{content:"\0025cf  "}.lst-kix_70mw4a2yzwhg-0>li:before{content:"\0025cf  "}.lst-kix_po45rieugyg2-2>li:before{content:"\0025a0  "}.lst-kix_p4r1wqvqk4hn-2>li:before{content:"\0025a0  "}.lst-kix_p4r1wqvqk4hn-0>li:before{content:"\0025cf  "}.lst-kix_p4r1wqvqk4hn-4>li:before{content:"\0025cb  "}ul.lst-kix_c43lravhtfhh-8{list-style-type:none}ul.lst-kix_c43lravhtfhh-7{list-style-type:none}ul.lst-kix_c43lravhtfhh-6{list-style-type:none}ul.lst-kix_c43lravhtfhh-5{list-style-type:none}ul.lst-kix_c43lravhtfhh-4{list-style-type:none}.lst-kix_stykl9wpd8tc-0>li:before{content:"\0025cf  "}.lst-kix_482voacspu5m-8>li:before{content:"\0025a0  "}ul.lst-kix_c43lravhtfhh-3{list-style-type:none}.lst-kix_482voacspu5m-6>li:before{content:"\0025cf  "}ul.lst-kix_c43lravhtfhh-2{list-style-type:none}.lst-kix_stykl9wpd8tc-4>li:before{content:"\0025cb  "}ul.lst-kix_c43lravhtfhh-1{list-style-type:none}ul.lst-kix_c43lravhtfhh-0{list-style-type:none}.lst-kix_482voacspu5m-2>li:before{content:"\0025a0  "}.lst-kix_xzbnyyg4kqxe-3>li:before{content:"\0025cf  "}ul.lst-kix_dqjb6go70mwb-2{list-style-type:none}.lst-kix_482voacspu5m-0>li:before{content:"\0025cf  "}.lst-kix_482voacspu5m-4>li:before{content:"\0025cb  "}ul.lst-kix_dqjb6go70mwb-1{list-style-type:none}ul.lst-kix_dqjb6go70mwb-0{list-style-type:none}ul.lst-kix_dqjb6go70mwb-6{list-style-type:none}ul.lst-kix_dqjb6go70mwb-5{list-style-type:none}.lst-kix_stykl9wpd8tc-2>li:before{content:"\0025a0  "}ul.lst-kix_dqjb6go70mwb-4{list-style-type:none}.lst-kix_xzbnyyg4kqxe-5>li:before{content:"\0025a0  "}.lst-kix_xzbnyyg4kqxe-7>li:before{content:"\0025cb  "}ul.lst-kix_dqjb6go70mwb-3{list-style-type:none}.lst-kix_5xrn4f2v5mdj-0>li:before{content:"\0025cf  "}ul.lst-kix_dqjb6go70mwb-8{list-style-type:none}ul.lst-kix_dqjb6go70mwb-7{list-style-type:none}ul.lst-kix_3mihu5srrxcs-5{list-style-type:none}ul.lst-kix_3mihu5srrxcs-6{list-style-type:none}ul.lst-kix_3mihu5srrxcs-3{list-style-type:none}ul.lst-kix_3mihu5srrxcs-4{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-0{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-2{list-style-type:none}ul.lst-kix_3mihu5srrxcs-7{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-1{list-style-type:none}ul.lst-kix_3mihu5srrxcs-8{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-4{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-3{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-6{list-style-type:none}.lst-kix_stykl9wpd8tc-6>li:before{content:"\0025cf  "}.lst-kix_stykl9wpd8tc-8>li:before{content:"\0025a0  "}.lst-kix_xzbnyyg4kqxe-1>li:before{content:"\0025cb  "}ul.lst-kix_xzbnyyg4kqxe-5{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-8{list-style-type:none}ul.lst-kix_3mihu5srrxcs-1{list-style-type:none}ul.lst-kix_xzbnyyg4kqxe-7{list-style-type:none}ul.lst-kix_3mihu5srrxcs-2{list-style-type:none}ul.lst-kix_3mihu5srrxcs-0{list-style-type:none}.lst-kix_4yg1z8zdcqv-3>li:before{content:"\0025cf  "}ul.lst-kix_4yg1z8zdcqv-4{list-style-type:none}ul.lst-kix_4yg1z8zdcqv-5{list-style-type:none}ul.lst-kix_4yg1z8zdcqv-6{list-style-type:none}ul.lst-kix_4yg1z8zdcqv-7{list-style-type:none}ul.lst-kix_4yg1z8zdcqv-0{list-style-type:none}.lst-kix_4yg1z8zdcqv-1>li:before{content:"\0025cb  "}ul.lst-kix_4yg1z8zdcqv-1{list-style-type:none}ul.lst-kix_4yg1z8zdcqv-2{list-style-type:none}ul.lst-kix_4yg1z8zdcqv-3{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c63{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c20{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#f3f3f3;border-left-style:solid;border-bottom-width:0pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c54{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#ffffff;border-bottom-style:solid}.c37{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:87pt;border-top-color:#000000;border-bottom-style:solid}.c48{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:115.5pt;border-top-color:#000000;border-bottom-style:solid}.c29{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:164.2pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:96pt;border-top-color:#000000;border-bottom-style:solid}.c21{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:101.2pt;border-top-color:#000000;border-bottom-style:solid}.c42{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:129.8pt;border-top-color:#000000;border-bottom-style:solid}.c58{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:105.8pt;border-top-color:#000000;border-bottom-style:solid}.c55{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:141.8pt;border-top-color:#000000;border-bottom-style:solid}.c43{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:147.8pt;border-top-color:#000000;border-bottom-style:solid}.c52{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:117pt;border-top-color:#000000;border-bottom-style:solid}.c66{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:225pt;border-top-color:#000000;border-bottom-style:solid}.c64{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:183.8pt;border-top-color:#000000;border-bottom-style:solid}.c2{-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:11pt;font-family:"Arial";font-style:normal}.c24{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:normal}.c10{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:italic}.c13{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Courier New";font-style:normal}.c45{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial"}.c11{-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-family:"Courier New"}.c25{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c70{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial"}.c14{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c68{padding-top:14pt;padding-bottom:4pt;line-height:1.15;text-align:left}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c67{padding-top:24pt;padding-bottom:6pt;line-height:1.15;text-align:left}.c59{padding-top:20pt;padding-bottom:6pt;line-height:1.15;text-align:left}.c16{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c22{padding-top:16pt;padding-bottom:4pt;line-height:1.15;text-align:left}.c39{padding-top:18pt;padding-bottom:6pt;line-height:1.15;text-align:left}.c47{border-spacing:0;border-collapse:collapse;margin-right:auto}.c32{padding-top:18pt;padding-bottom:4pt;line-height:1.15;text-align:left}.c28{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:center}.c5{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:center}.c27{margin-left:54pt;orphans:2;widows:2}.c17{font-family:"Courier New";font-style:italic;font-weight:400}.c6{font-size:10pt;font-family:"Courier New";font-weight:700}.c30{margin-left:36pt;orphans:2;widows:2}.c34{margin-left:36pt;padding-left:0pt}.c31{orphans:2;widows:2}.c40{font-weight:700;font-family:"Courier New"}.c18{background-color:#ffffff;font-weight:700}.c0{color:inherit;text-decoration:inherit}.c71{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c65{width:33%;height:1px}.c19{font-weight:400;font-family:"Courier New"}.c51{font-family:"Verdana";font-weight:400}.c35{padding:0;margin:0}.c50{font-style:normal}.c33{background-color:#f3f3f3}.c23{font-style:italic}.c61{font-size:20pt}.c62{height:25pt}.c26{height:0pt}.c44{font-size:24pt}.c53{font-weight:700}.c60{page-break-after:avoid}.c15{font-size:9pt}.c56{color:#ff0000}.c69{height:19pt}.c41{background-color:#ffffff}.c49{margin-left:36pt}.c46{margin-left:18pt}.c38{font-size:16pt}.c7{height:11pt}.c57{text-indent:36pt}.c36{font-size:10pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style><p class="c67 title" id="h.371ohxts9gii"><span class="c25 c44">How to Add a Component</span></p><p class="c1"><span>Ellen Spertus (</span><span class="c16"><a class="c0" href="mailto:spertus@google.com">spertus@google.com</a></span><span class="c4">)</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">This document describes how to design and add a new component to App Inventor. &nbsp;</span></p><p class="c1 c31 c46"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.xfn3rf96y1d0">1. Background</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.b2hif7n9ob2q">1a. Android</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.un3tg21q60ct">1b. The Class Hierarchy</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.tagpg4ic9t5m">1c. Yail</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.zgumxajktcqy">1d. Naming</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.am3n33o5gx5r">1e. Types</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.br6v0nejpc0i">1f. Properties</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.fyz5n9f5b2ol">Java types</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.oa752ejtzfh7">Property editors</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.hgclbn5bnn95">Inheritance</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.pbv8yceocao0">Access</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.vo257592taml">Appearance in Designer</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.ltb8851qyvc0">Appearance in Blocks Editor</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.qryj2ucsrb8s">Texting example</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.zgtzuskqvtpg">1g. Methods</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.yaio2a6e89ma">Arguments</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.wyi660e4icyj">Return types</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.gkfo0u29zqss">1h. Events</a></span></p><p class="c1 c31 c46"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.8eqhtdbpkyo6">2. Interface Design</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.47v32brn2e29">2a. General Principles</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.gairsbwyrmql">2b. Principles Specific to App Inventor</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.x9wxvap4ap7">Make it easy for the beginner</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.r5pomm1ugdak">Organize functionality in a way that makes sense to the user</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.sw05sbelcrb5">Mobile ≮ Desktop</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.l76rskp6y6zi">Provide default values</a></span></p><p class="c1 c31 c46"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.qh3vht81jq60">3. Making Proposals</a></span></p><p class="c1 c31 c46"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.x6w7gmpy8h0">4. Implementation</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.hyf8k5q3u962">4a. Creating an Icon</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.xymwl7c0e506">4b. Mocking the component</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.joae7p4b8bs5">4c. Declaring the Class</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.uozrajb9crsb">SimpleObject annotation</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.h2xxd1dq0v3x">DesignerComponent annotation</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.4f8sk670wdrv">UsesPermissions annotation</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.pf40xv3glv5o">4d. Properties</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.kvd4wbvn6ts">SimpleProperty annotation</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.ffjkjrtbh2la">DesignerProperty annotation</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.47v7y68moh2v">Hiding a property defined in a superclass</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.mpnffe8nvqu4">4e. Methods</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.u5hgt3ltmhbc">SimpleFunction annotation</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.8te56x1w9u8b">Launching threads</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.fnbbxzbsom4x">4f. Events</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.wf1oegp563if">SimpleEvent annotation</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.2nnznhhjiea1">4g. Managing the Activity life cycle</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.3kn0fmfydnq1">4h. Including external libraries</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.4jyv4s6bnjrd">Adding to appinventor/lib</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.d7mp7drzzza">Adding to build.xml</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.fbmmsngpnimu">Using the library in your component</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.367tgvyrxp9k">Using Native Libraries</a></span></p><p class="c1 c30"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.qf7nin2dl4lw">4i. Testing</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.auqte6aqsygm">Browser tests</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.ej7z36kq785l">Unit tests of static methods</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.s1ej61821ifa">Unit tests of instantiated components</a></span></p><p class="c1 c27"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.lvy4xzcgqetx">System tests</a></span></p><p class="c1 c31 c46"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.g7yi5132bgkf">5. Ordering components within a palette category</a></span></p><p class="c1 c31 c46"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.sajmtj7l1183">6. Internationalization</a></span></p><p class="c1 c31 c46"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#h.690wgh24dkbc">7. Supporting legacy devices</a></span></p><h1 class="c59" id="h.xfn3rf96y1d0"><span class="c25 c61">1. Background</span></h1><h2 class="c39" id="h.b2hif7n9ob2q"><span class="c25 c38">1a. Android</span></h2><p class="c1"><span>It is assumed that readers of this document know how to write Android programs using the Java SDK. &nbsp;If you don’t, the </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/index.html&amp;sa=D&amp;ust=1539767441364000">Android Developers</a></span><span>&nbsp;site has some good information on </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/training/basics/firstapp/index.html&amp;sa=D&amp;ust=1539767441364000">Building Your First App</a></span><span>&nbsp;and </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/training/basics/activity-lifecycle/index.html&amp;sa=D&amp;ust=1539767441364000">Managing the Activity Lifecycle</a></span><span class="c4">.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>One aspect of Android worth highlighting and reading about is </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://android-developers.blogspot.com/2009/05/painless-threading.html&amp;sa=D&amp;ust=1539767441365000">the Android UI thread</a></span><span>, which is responsible for responding to UI interactions (such as button presses) and updating the UI. &nbsp;All user code </span><span>and most component library code runs in the UI thread.</span><span>&nbsp; (Later, we discuss creating threads as a result of user actions.) &nbsp;This gives a simple execution model for users: An App Inventor procedure will never be interrupted by an event handler, or vice versa; nor will one event handler be interrupted by another. &nbsp;This is illustrated in </span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.zep2s4ch9535">Figure </a></span><span class="c4">1.</span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 517.00px; height: 367.00px;"><img alt="" src="./How to Add a Component_files/ball.png" style="width: 517.00px; height: 367.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><a id="id.zep2s4ch9535"></a><p class="c5"><span class="c23">Figure 1: Sample program demonstrating serial semantics. &nbsp; When Button1.Click is executed, the two Balls are placed in the same position, causing the event handler Ball1.CollidedWith to be added to the scheduling queue. &nbsp;It is not executed, however, until the first handler has completed, no matter how long the unshown user procedure </span><span>wait</span><span class="c23">&nbsp;takes. &nbsp;<br>The final label display is always: “...End of Button1.Click......Ball1.CollidedWith...”.</span></p><h2 class="c39" id="h.un3tg21q60ct"><span class="c25 c38">1b. The Class Hierarchy</span></h2><p class="c1"><span>All components fit within a class/interface hierarchy, a subset of which is shown in Figure 2. &nbsp;All components implement the </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/Component.html&amp;sa=D&amp;ust=1539767441366000">Component</a></span><span>&nbsp;interface, which consists mostly of useful constants. &nbsp;Every component extends either the </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/VisibleComponent.html&amp;sa=D&amp;ust=1539767441366000">VisibleComponent</a></span><span>&nbsp;or </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/AndroidNonvisibleComponent.html&amp;sa=D&amp;ust=1539767441367000">AndroidNonvisibleComponent</a></span><span>&nbsp;abstract classes, and some also implement the </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/ComponentContainer.html&amp;sa=D&amp;ust=1539767441367000">ComponentContainer</a></span><span>&nbsp;interface. &nbsp;Every application has a </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/Form.html&amp;sa=D&amp;ust=1539767441367000">Form</a></span><span>&nbsp;(displayed to the user as “Screen”), </span><span>which holds zero or more instances of </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/AndroidViewComponent.html&amp;sa=D&amp;ust=1539767441368000">AndroidViewComponent</a></span><span>, the superclass of most visible components. &nbsp;Exceptions include </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/Sprite.html&amp;sa=D&amp;ust=1539767441368000">Sprite</a></span><span>, which can only be contained in a </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/Canvas.html&amp;sa=D&amp;ust=1539767441368000">Canvas</a></span><span class="c4">.</span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 561.00px; height: 382.76px;"><img alt="" src="./How to Add a Component_files/sMbFR_KOlbDfkpwPjKtgdCg.png" style="width: 561.00px; height: 382.76px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><a id="id.slvarztf0k0o"></a><p class="c5"><span class="c3">Figure 2: An incomplete subset of the component class/interface hierarchy. &nbsp;<br>Interfaces and abstract methods are shown in italics. &nbsp;</span></p><h2 class="c32" id="h.tagpg4ic9t5m"><span>1c. </span><span class="c25 c38">Yail</span></h2><p class="c1"><span>The intermediate representation for apps during compilation is YAIL [Young Android Intermediate Language</span><sup><a href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#ftnt1" id="ftnt_ref1">[1]</a></sup><span>] (often written “Yail” or “yail”, and pronounced “Yale”). &nbsp;YAIL programs consist of </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://en.wikipedia.org/wiki/S-expression&amp;sa=D&amp;ust=1539767441370000">s-expressions</a></span><span>&nbsp;that can be translated by a Scheme compiler or interpreter with the appropriate macros and procedures, defined in </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/buildserver/src/com/google/appinventor/buildserver/resources/runtime.scm&amp;sa=D&amp;ust=1539767441370000">runtime.scm</a></span><span class="c4">.</span></p><h2 class="c39" id="h.zgumxajktcqy"><span class="c25 c38">1d. Naming</span></h2><p class="c1"><span class="c4">The names of components and their properties, methods, and events are all capitalized as UpperCamelCase.</span></p><h2 class="c32" id="h.am3n33o5gx5r"><span>1e. </span><span>Types</span></h2><p class="c1"><span>Table 1 shows the types in the App Inventor language, their correspondence to Yail compile-time and Scheme run-time types, and sample properties of those types. &nbsp;Translation between Java and Yail types occurs within </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://code.google.com/p/app-inventor/source/browse/appinventor/components/src/com/google/appinventor/components/scripts/ComponentProcessor.java&amp;sa=D&amp;ust=1539767441371000">ComponentProcessor</a></span><span class="c19">.javaTypeToYailType(</span><span class="c4">).</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.0eeffe6eabd981af8b18a9a3762f7bce3d805419"></a><a id="t.0"></a><table class="c47"><tbody><tr class="c26"><td class="c12" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Java types</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Yail types</span></p><p class="c9"><span class="c45 c50">(compile-time)</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Scheme types<br>(run-time)</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">sample property</span></p></td></tr><tr class="c26"><td class="c12" colspan="1" rowspan="1"><p class="c14"><span class="c4">boolean</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c14"><span class="c4">boolean</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">boolean</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c14"><span class="c4">Button.Enabled</span></p></td></tr><tr class="c26"><td class="c12" colspan="1" rowspan="1"><p class="c14"><span class="c4">String</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c14"><span class="c4">text</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">string</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c14"><span class="c4">Label.Text</span></p></td></tr><tr class="c26"><td class="c12" colspan="1" rowspan="1"><p class="c14"><span class="c4">int</span></p><p class="c14"><span class="c4">short</span></p><p class="c14"><span class="c4">long</span></p><p class="c14"><span class="c4">float</span></p><p class="c14"><span class="c4">double</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c14"><span class="c4">number</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">number</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c14"><span class="c4">Label.FontSize</span></p><p class="c14 c7"><span class="c4"></span></p><p class="c14"><span class="c4">Pedometer.ElapsedTime</span></p><p class="c14"><span class="c4">Sprite.Heading</span></p><p class="c14"><span class="c4">LocationSensor.Longitude</span></p></td></tr><tr class="c62"><td class="c12" colspan="1" rowspan="1"><p class="c14"><span class="c4">java.util.Calendar</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c14"><span class="c4">InstantInTime</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">java.util.Calendar</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c14 c7"><span class="c4"></span></p></td></tr><tr class="c26"><td class="c12" colspan="1" rowspan="1"><p class="c14"><span>any Java type, including primitive types and Object types.</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c14"><span>any</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span>any Java type, including primitive types and Object types.</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c14 c7"><span class="c4"></span></p></td></tr><tr class="c26"><td class="c12" colspan="1" rowspan="1"><p class="c14"><span class="c4">Component</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c14"><span class="c4">component</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">Component</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c14 c7"><span class="c4"></span></p></td></tr><tr class="c26"><td class="c12" colspan="1" rowspan="1"><p class="c14"><span>YailList<br>Collection</span><span>&lt;?&gt;</span></p></td><td class="c37" colspan="1" rowspan="1"><p class="c14"><span class="c4">list</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">yail-list</span></p></td><td class="c64" colspan="1" rowspan="1"><p class="c14"><span class="c4">ListPicker.Elements</span></p><p class="c14"><span class="c4">BluetoothClient.AddressesAndNames</span></p></td></tr></tbody></table><p class="c1 c7"><span class="c4"></span></p><p class="c5"><span class="c23">Table 1: Correspondences between Java and Yail types. &nbsp;<br>The Yail types in the first three rows (boolean, text, and number) are built-in Scheme types. &nbsp;The runtime types for the next three rows (Calendar, Object, and Component) are simply their Java types, which are accessible through the kawa Scheme implementation we use. &nbsp;</span><span class="c23">The Scheme name </span><span class="c17">yail-list</span><span class="c23">&nbsp;is used to refer to the Java type YailList, which is a subclass of the kawa type gnu.list.Pair.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>Global variables are untyped. &nbsp;</span><span>Static type checking is performed only when the inputs to a block are literals, or when we know for sure the relevant types.</span><span class="c4">&nbsp; For example, the Blocks Editor will not allow a text literal to be an input to the numeric plus operation and you can't plug a numeric function into the test socket of an IF block.. &nbsp;</span></p><h2 class="c39" id="h.br6v0nejpc0i"><span class="c25 c38">1f. Properties</span></h2><p class="c1"><span class="c4">Properties correspond to attributes/fields/instance variables in Java objects. &nbsp;</span></p><p class="c1"><span>In the past, properties were divided into the categories “Behavior”, “Appearance”, and “Deprecated” for documentation purposes. &nbsp;For example, </span><span class="c19">Sprite.Enabled</span><span>&nbsp;was in the “Behavior” category, while </span><span class="c19">Sprite.Visible</span><span>&nbsp;was in the “Appearance” category. &nbsp;This distinction is no longer </span><span>used</span><span class="c4">&nbsp;and need not be made in new code.</span></p><h3 class="c22" id="h.fyz5n9f5b2ol"><span class="c24">Java types</span></h3><p class="c1"><span>Properties can be of any of the types shown in Table 1. &nbsp;While there are properties of type </span><span class="c19">float</span><span>, </span><span class="c19">double</span><span>&nbsp;is preferred. &nbsp;Similarly, </span><span class="c19">int</span><span>&nbsp;should be preferred over </span><span class="c19">short</span><span class="c4">.</span></p><h3 class="c22" id="h.oa752ejtzfh7"><span class="c24">Property editors</span></h3><p class="c1"><span>In addition to its Java type, each property has an editor type </span><span>that controls what values can be specified in the Designer and how they are specified. &nbsp;For example, the Java type of </span><span class="c19">Label.TextAlignment</span><span>&nbsp;is </span><span class="c19">int</span><span>, but its editor type is </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/annotations/DesignerProperty.html%23PROPERTY_TYPE_TEXTALIGNMENT&amp;sa=D&amp;ust=1539767441385000">PROPERTY_TYPE_TEXTALIGNMENT</a></span><span class="c4">, which enables it to be set to one of three integers corresponding to “left”, “center”, or “right” through a drop-down menu as shown:</span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 81.00px; height: 95.00px;"><img alt="" src="./How to Add a Component_files/alignment.gif" style="width: 81.00px; height: 95.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span>(The strings are defined in </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/appengine/src/com/google/appinventor/client/OdeMessages.java&amp;sa=D&amp;ust=1539767441385000">OdeMessages.java</a></span><span>&nbsp;and can be easily replaced with translations.) &nbsp; Table 2 shows abbreviated information about existing property editor types (which are specified in </span><span>PropertyTypeConstants and </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/appengine/src/com/google/appinventor/client/editor/youngandroid/palette/YoungAndroidPalettePanel.java&amp;sa=D&amp;ust=1539767441386000">YoungAndroidPalettePanel.java</a></span><span>)</span><span>. &nbsp;The separate document </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://docs.google.com/document/pub?id%3D14c1X19s6pXYHdDBOJJELcmOghWbm2FPekRvGzX0ENps&amp;sa=D&amp;ust=1539767441386000">How to Add a Property to a Component</a></span><span>&nbsp;</span><span class="c4">describes how to create a new PropertyEditor if no existing one meets your needs.</span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.dd923ba98aa338a55f534b039b8369866b20bc43"></a><a id="t.1"></a><table class="c47"><tbody><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c45 c50">Name</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c45 c50">Values</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c45 c50">Sample use</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">ASSET</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">the set of uploaded assets (media files)</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Sound.Source</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">BLUETOOTHCLIENT</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">the set of BluetoothClient components in this project</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">LegoMindstormsNxtBase.<br>BluetoothClient</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">BOOLEAN</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">{true, false}</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Button.Enabled</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">BUTTON_SHAPE</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">&nbsp;</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Button.Shape</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">COLOR</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">{“Black”, “Blue”, etc.}</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Label.FontColor</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">COMPONENT</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">the set of components in this project</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">not directly used</span></p></td></tr><tr class="c69"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">FLOAT</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">floating-point values</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Sprite.Speed</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">INTEGER</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">integer values</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">not used</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">LEGO_NXT_SENSOR_PORT</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">{“1”, “2”, “3”, “4”}</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">NxtColorSensor.SensorPort</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">NON_NEGATIVE_FLOAT</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">non-negative floating-point values</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Label.FontSize</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">NON_NEGATIVE_INTEGER</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">non-negative integer values</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Sound.MinimumInterval</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">SCREEN_ORIENTATION</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">{“unspecified”, “portrait”, “landscape”}</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Form.ScreenOrientation</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">STRING</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">StringPropertyEditor</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">ButtonBase.String</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">TEXT</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">TextPropertyEditor</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">not used</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">TEXTALIGNMENT</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">{“left”, “center”, “right”}</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Label.TextAlignment</span></p></td></tr><tr class="c26"><td class="c43" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">TYPEFACE</span></p></td><td class="c29" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">{“default”, “san serif”, “serif”, “monospace”}</span></p></td><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c25 c15">Label.FontTypeface</span></p></td></tr></tbody></table><a id="id.87io6y5poewv"></a><p class="c5"><span class="c3">Table 2: Different types of PropertyEditors. &nbsp;<br>The prefix “PROPERTY_TYPE_” has been omitted from all entries in the “Name” column. &nbsp;</span></p><h3 class="c22" id="h.hgclbn5bnn95"><span class="c24">Inheritance</span></h3><p class="c1"><span>In general, a component inherits the properties of its superclass, but it is possible to suppress this. &nbsp;For example, even though (as shown in Figure 1), </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/Ball.html&amp;sa=D&amp;ust=1539767441404000">Ball</a></span><span>&nbsp;is an indirect subclass of </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/VisibleComponent.html&amp;sa=D&amp;ust=1539767441405000">VisibleComponent</a></span><span>, which has the properties </span><span class="c19">Height</span><span>&nbsp;and </span><span class="c19">Width</span><span>, </span><span class="c19">Ball</span><span>&nbsp;does not. &nbsp;Instead, it has </span><span class="c19">Radius</span><span class="c4">. &nbsp;How to suppress inheritance will be discussed in the implementation section.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">It is not possible to change the Java type of an inherited property, although it should be possible to change the editor type.</span></p><h3 class="c22" id="h.pbv8yceocao0"><span class="c24">Access</span></h3><p class="c1"><span class="c4">While most properties can be read and written in both the Designer and Blocks Editor, there are some exceptions. &nbsp;Table 3 gives some examples.</span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.ff34f87694cd5087be794b167d3ec68276d91314"></a><a id="t.2"></a><table class="c47"><tbody><tr class="c26"><td class="c42" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Component</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Property</span></p></td><td class="c58" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Designer</span></p></td><td class="c52" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Blocks Editor</span></p></td></tr><tr class="c26"><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c4">Label</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c14"><span class="c4">Text</span></p></td><td class="c58" colspan="1" rowspan="1"><p class="c14"><span class="c4">read/write</span></p></td><td class="c52" colspan="1" rowspan="1"><p class="c14"><span class="c4">read/write</span></p></td></tr><tr class="c26"><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c4">TableArrangement</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c14"><span class="c4">Rows</span></p></td><td class="c58" colspan="1" rowspan="1"><p class="c14"><span class="c4">read/write</span></p></td><td class="c52" colspan="1" rowspan="1"><p class="c14"><span class="c4">--</span></p></td></tr><tr class="c26"><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c4">LocationSensor</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c14"><span class="c4">Latitude</span></p></td><td class="c58" colspan="1" rowspan="1"><p class="c14"><span class="c4">--</span></p></td><td class="c52" colspan="1" rowspan="1"><p class="c14"><span class="c4">read-only</span></p></td></tr><tr class="c26"><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c4">ListPicker</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c14"><span class="c4">ElementsFromString</span></p></td><td class="c58" colspan="1" rowspan="1"><p class="c14"><span class="c4">write-only</span></p></td><td class="c52" colspan="1" rowspan="1"><p class="c14"><span class="c4">write-only</span></p></td></tr><tr class="c26"><td class="c42" colspan="1" rowspan="1"><p class="c14"><span class="c3">AndroidViewComponent</span></p></td><td class="c48" colspan="1" rowspan="1"><p class="c14"><span class="c4">Row, Column</span></p></td><td class="c58" colspan="1" rowspan="1"><p class="c14"><span class="c4">write indirectly</span></p></td><td class="c52" colspan="1" rowspan="1"><p class="c14"><span class="c4">--</span></p></td></tr></tbody></table><a id="id.4blqmes2669f"></a><p class="c5"><span class="c3">Table 3: Visibility of properties in Designer and Blocks Editor.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>As shown in Table 1, the properties Row and Column, which belong to all components that extend </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//index.html?com/google/appinventor/components/runtime/AndroidViewComponent.html&amp;sa=D&amp;ust=1539767441415000">AndroidViewComponent</a></span><span>, such as Button and Label, can only be set indirectly. &nbsp;They are only set when the component is placed within a </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/HorizontalArrangement.html&amp;sa=D&amp;ust=1539767441415000">HorizontalArrangement</a></span><span>, </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/TableArrangement.html&amp;sa=D&amp;ust=1539767441416000">TableArrangement</a></span><span>, or </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/VerticalArrangement.html&amp;sa=D&amp;ust=1539767441416000">VerticalArrangement</a></span><span class="c4">&nbsp;and specify the relative position of the component, which is set indirectly by dragging the component within the Designer. &nbsp;For an example, see Figure 3.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 592.00px; height: 202.00px;"><img alt="" src="./How to Add a Component_files/row-column.PNG" style="width: 592.00px; height: 202.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><a id="id.tc8tw89teqod"></a><p class="c5"><span class="c23">Figure 3: A </span><span class="c17">HorizontalArrangement</span><span class="c3">&nbsp;containing three other components.</span></p><p class="c5"><span class="c23">Although not visible in the Properties panel, the three interior components have </span><span class="c17">Column</span><span class="c23">&nbsp;and </span><span class="c17">Row</span><span class="c23">&nbsp;properties indicating their positions.</span></p><h3 class="c22" id="h.vo257592taml"><span class="c24">Appearance in Designer</span></h3><p class="c1"><span>Properties are listed alphabetically in the Designer except that </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//com/google/appinventor/components/runtime/AndroidViewComponent.html%23Width()&amp;sa=D&amp;ust=1539767441418000">Width</a></span><span>&nbsp;and </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//com/google/appinventor/components/runtime/AndroidViewComponent.html%23Height()&amp;sa=D&amp;ust=1539767441418000">Height</a></span><span>&nbsp;always appear at the bottom of the Properties pane for visible components, as shown in Figure 3. &nbsp;(They are explicitly added to the list of properties in </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//com/google/appinventor/client/editor/simple/components/MockVisibleComponent.html%23addWidthHeightProperties()&amp;sa=D&amp;ust=1539767441419000">MockVisibleComponent.addWidthHeightProperties()</a></span><span class="c4">.)</span></p><h3 class="c22" id="h.ltb8851qyvc0"><span class="c24">Appearance in Blocks Editor</span></h3><p class="c1"><span class="c4">A component’s properties are displayed in alphabetical order in the Blocks Editor. &nbsp;Setters are pastel blue (#A2CDFA), while getters are a much lighter shade of pastel blue (#D9E5FF). &nbsp;There is no way to give properties a different ordering or coloring.</span></p><h3 class="c22" id="h.qryj2ucsrb8s"><span>Texting </span><span class="c24">example</span></h3><p class="c1"><span class="c4">The properties defined for the Texting component (an arbitrary example) are shown in Table 3.</span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.28c53e56411b3c7d95316ecc436b0d4cf748080f"></a><a id="t.3"></a><table class="c47"><tbody><tr class="c26"><td class="c55" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Name</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">Java type</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c9"><span class="c45 c50">editor type</span></p></td></tr><tr class="c26"><td class="c55" colspan="1" rowspan="1"><p class="c14"><span class="c4">PhoneNumber</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">String</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c14"><span class="c4">PROPERTY_TYPE_STRING</span></p></td></tr><tr class="c26"><td class="c55" colspan="1" rowspan="1"><p class="c14"><span class="c4">Message</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">String</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c14"><span class="c4">PROPERTY_TYPE_STRING</span></p></td></tr><tr class="c26"><td class="c55" colspan="1" rowspan="1"><p class="c14"><span class="c4">ReceivingEnabled</span></p></td><td class="c21" colspan="1" rowspan="1"><p class="c14"><span class="c4">boolean</span></p></td><td class="c66" colspan="1" rowspan="1"><p class="c14"><span class="c4">PROPERTY_TYPE_BOOLEAN</span></p></td></tr></tbody></table><a id="id.s8q0xhife0uj"></a><p class="c5"><span class="c3">Table 4: Properties defined for the Texting component. &nbsp;<br>All can be both read and written in both the Designer and Blocks Editor.</span></p><h2 class="c39" id="h.zgtzuskqvtpg"><span>1g. </span><span class="c25 c38">Methods</span></h2><p class="c1"><span>Methods are simpler than properties. &nbsp;They are visible only in the Blocks Editor, not in the Designer. &nbsp;They can be inherited, although they are usually only defined for components that are not themselves subclasses. &nbsp;(An exception is </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//com/google/appinventor/components/runtime/Sprite.html%23CollidingWith(com.google.appinventor.components.runtime.Sprite)&amp;sa=D&amp;ust=1539767441424000">Sprite</a></span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg//com/google/appinventor/components/runtime/Sprite.html%23CollidingWith(com.google.appinventor.components.runtime.Sprite)&amp;sa=D&amp;ust=1539767441425000">.CollidingWith()</a></span><span>, which is inherited by </span><span class="c19">ImageSprite</span><span>&nbsp;and </span><span class="c19">Ball</span><span class="c4">.)</span></p><h3 class="c68" id="h.yaio2a6e89ma"><span class="c24">Arguments</span></h3><p class="c1"><span class="c4">Methods may have zero or more arguments of any Java type shown in Table 1. &nbsp;In addition to the Java primitives boolean, int, and long, there are methods that take arguments of the following types:</span></p><ul class="c35 lst-kix_vldu5pp03bqb-0 start"><li class="c1 c34"><span class="c19">void Speak(</span><span class="c40">String</span><span class="c13">&nbsp;message)</span></li><li class="c1 c34"><span class="c19">void Web.BuildPostData(</span><span class="c40">YailList</span><span class="c13">&nbsp;list)</span></li><li class="c1 c34"><span class="c19">long Clock.GetMillis(</span><span class="c40">java.util.Calendar</span><span class="c13">&nbsp;instant)</span></li><li class="c1 c34"><span class="c19">boolean Sprite.CollidingWith(</span><span class="c40">Sprite</span><span class="c13">&nbsp;other)</span></li></ul><h3 class="c22" id="h.wyi660e4icyj"><span class="c24">Return types</span></h3><p class="c1"><span>Similarly, return types may be any Java type shown in Table 1 (or </span><span class="c19">void</span><span class="c4">). &nbsp;Here are examples of methods with different return types:</span></p><ul class="c35 lst-kix_ct6heytdumu8-0 start"><li class="c1 c34"><span class="c40">void</span><span class="c13">&nbsp;Sound.Play()</span></li><li class="c1 c34"><span class="c40">boolean</span><span class="c13">&nbsp;Sprite.CollidingWith(Sprite other)</span></li><li class="c1 c34"><span class="c40">int</span><span class="c13">&nbsp;Canvas.GetPixelColor(int x, int y)</span></li><li class="c1 c34"><span class="c40">double</span><span class="c13">&nbsp;LocationSensor.LatitudeFromAddress(String locationName)</span></li><li class="c1 c34"><span class="c40">long</span><span class="c19">&nbsp;Clock.SystemTime</span><span class="c19">()</span></li><li class="c1 c34"><span class="c40">List&lt;Integer&gt;</span><span class="c13">&nbsp; BluetoothConnectionBase.ReceiveSignedBytes(int numberOfBytes)</span></li><li class="c1 c34"><span class="c40">String</span><span class="c13">&nbsp;Clock.FormatTime(Calendar instant)</span></li><li class="c1 c34"><span class="c40">java.util.Calendar</span><span class="c19">&nbsp;Clock.Now</span><span class="c19">()</span></li></ul><h2 class="c39" id="h.gkfo0u29zqss"><span class="c25 c38">1h. Events</span></h2><p class="c1"><span>Like methods, events are visible only in the Blocks Editor. &nbsp;They may have arguments of any Java type shown in Table 1, but their return type is always </span><span class="c19">void</span><span class="c4">.</span></p><h1 class="c67" id="h.8eqhtdbpkyo6"><span>2. </span><span class="c25 c61">Interface Design</span></h1><h2 class="c39" id="h.47v32brn2e29"><span>2a. </span><span class="c25 c38">General Principles</span></h2><p class="c1"><span>Josh Bloch has</span><span><a class="c0" href="https://www.google.com/url?q=http://dl.acm.org/citation.cfm?id%3D1176622&amp;sa=D&amp;ust=1539767441430000">&nbsp;</a></span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://dl.acm.org/citation.cfm?id%3D1176622&amp;sa=D&amp;ust=1539767441430000">compiled</a></span><span>&nbsp;and </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://www.youtube.com/watch?v%3DaAb7hSCtvGw&amp;sa=D&amp;ust=1539767441430000">presented</a></span><span class="c4">&nbsp;some excellent principles of API design, including (quoted verbatim):</span></p><ul class="c35 lst-kix_5xrn4f2v5mdj-0 start"><li class="c1 c34"><span class="c53">APIs should be self-documenting</span><span>: It should rarely require documentation to read code written to a good API. &nbsp;[Consider the simplicity of </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/tutorials/hellopurr/HelloPurrAssets/blockseditorwithblocks.png&amp;sa=D&amp;ust=1539767441430000">the blocks in HelloPurr</a></span><span>.</span><span class="c4">]</span></li><li class="c1 c34"><span class="c18">Early drafts of APIs should be short,</span><span class="c4 c41">&nbsp;typically one page with class and method signatures and one-line descriptions. This makes it easy to restructure the API when you don't get it right the first time.</span></li><li class="c1 c34"><span class="c18">Code the use-cases against your API before you implement it</span><span class="c4 c41">, even before you specify it properly. This will save you from implementing, or even specifying, a fundamentally broken API.</span></li><li class="c1 c34"><span class="c18">Example code should be exemplary.</span><span class="c4 c41">&nbsp;If an API is used widely, its examples will be the archetypes for thousands of programs. Any mistakes will come back to haunt you a thousand fold.</span></li><li class="c1 c34"><span class="c18">API design is not a solitary activity.</span><span class="c4 c41">&nbsp;Show your design to as many people as you can, and take their feedback seriously. </span></li><li class="c1 c34"><span class="c18">Obey the principle of least astonishment.</span><span class="c4 c41">&nbsp;Every method should do the least surprising thing it could, given its name. If a method doesn't do what users think it will, bugs will result.</span></li><li class="c1 c34"><span class="c18">Don't make the client do anything the library could do.</span><span class="c4 c41">&nbsp;Violating this rule leads to boilerplate code in the client, which is annoying and error-prone. &nbsp;[We initially made this mistake by not providing a built-in block for constructing an arbitrary color from alpha-red-green-blue component values, requiring the user to do ugly bit-shifting.]</span></li><li class="c1 c34"><span class="c18">When in doubt, leave it out.</span><span class="c41">&nbsp;If there is a fundamental theorem of API design, this is it.... You can always add things later, but you can't take them away. &nbsp;[We violated this by creating three media playback components (Player, Sound, and VideoPlayer) with overlapping functionality. &nbsp;We can never remove any of them without breaking user code.]</span></li></ul><h2 class="c32" id="h.gairsbwyrmql"><span class="c25 c38">2b. Principles Specific to App Inventor</span></h2><p class="c1"><span class="c4">The previously unwritten App Inventor design principles (which we have not always been successful at following) are:</span></p><h3 class="c22" id="h.x9wxvap4ap7"><span class="c24">Make it easy for the beginner</span></h3><p class="c1"><span>We chose to have the offset of the first element in a list be 1, rather than 0, because 1 is what a naive user would expect. &nbsp;While this might make the transition to conventional programming languages a little harder, we’re more concerned with helping people discover the joy of computing rather than the details that don’t make sense until you’ve taken several classes. &nbsp;Follow the </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://en.wikipedia.org/wiki/Principle_of_least_astonishment&amp;sa=D&amp;ust=1539767441433000">Principle of Least Astonishment</a></span><span class="c4">. &nbsp;If you have to decide between astonishing a beginner or an experienced computer scientist, astonish the latter.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">It is not always obvious what is easiest for the user. &nbsp;Consider the numeric argument to the Sound component’s vibrate method. &nbsp;We chose to make it milliseconds, which enables people to use whole numbers (500 milliseconds) rather than fractions (.5). &nbsp;On the other hand, someone who doesn’t read the manual or doesn’t know what milliseconds are would probably start their experimenting with an argument of 1, which would cause an imperceptible vibration. &nbsp;</span></p><h3 class="c22" id="h.r5pomm1ugdak"><span class="c24">Organize functionality in a way that makes sense to the user</span></h3><p class="c1"><span class="c4">Continuing our discussion of the vibrate method, a physicist might know to look for it in the Sound component, but most users would not. &nbsp;Unfortunately, I don’t have a better suggestion of where the vibrate functionality should be, short of creating a new component whose name would make people snicker.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">An example of good organization is having Camera, ImagePicker, and VideoPlayer all within the Media category. &nbsp;Their implementations are totally different, but, to the user, it makes sense for them to be together.</span></p><h3 class="c22" id="h.sw05sbelcrb5"><span class="c24">Mobile ≮ Desktop</span></h3><p class="c1"><span class="c4">Mobile devices should not be considered to be desktop (or laptop) computers with small displays. &nbsp;Focus less on functionality that works better on a large screen than a small screen, and focus more on functionality that takes advantage of mobile devices’ unique features, such as portability, connectivity (SMS, BlueTooth, NFC, etc.), sensors (acceleration and location), and recorders (audio, photographs, videos). &nbsp;This principle suggests it would be better to develop components for data collection, taking advantage of all of these features of mobile devices, than to develop, for example, the capacity to display multiple videos on a single screen, which could only be done poorly on (existing) mobile technology.</span></p><h3 class="c22" id="h.l76rskp6y6zi"><span class="c24">Provide default values</span></h3><p class="c1"><span class="c4">Users should not have to understand all of a component’s properties in order to use it. &nbsp;For example, new Labels have reasonable default values for all of their properties except for Text (which has the self-explanatory initial value “Text for Label1”). &nbsp;This enables someone to begin using a component quickly and only look at other properties when dissatisfied with the default behavior (such as a label being hard to read on their chosen Screen background image). &nbsp;By not requiring the user to understand properties until they are needed, this makes them a solution rather than a problem.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">Similarly, reasonable default values should be provided for built-in blocks. &nbsp;The parameter to the “make color” block is a list that must contain elements with the values of the red, green, and blue components and may optionally contain a fourth element with an alpha level, something that most users will never need. &nbsp;(The downside of taking a single list parameter instead of one parameter for each numeric input is that the socket labels are less meaningful.)</span></p><h1 class="c59" id="h.qh3vht81jq60"><span class="c25 c61">3. Making Proposals</span></h1><p class="c1"><span class="c4">Before writing any component code, discuss with other App Inventor developers (and, ideally, users) what the associated properties, methods, and events should be. &nbsp;Ideally, your discussions should include both naive and sophisticated users. &nbsp;For example, when Trevor Adams was designing the Instrument component, he spoke at length with both Ellen Spertus, who didn’t understand what a note or synthesizer was, and Chris Brown, a pioneering professor of electronic music.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">The proposal should include:</span></p><ul class="c35 lst-kix_4yg1z8zdcqv-0 start"><li class="c1 c34"><span class="c4">the name and a brief description of the component</span></li><li class="c1 c34"><span class="c4">the location in the class hierarchy</span></li><li class="c1 c34"><span class="c4">properties (name, brief description, type, and default value)</span></li><li class="c1 c34"><span class="c4">methods (name, parameter and return types, brief descriptions of the methods and their parameters)</span></li><li class="c1 c34"><span class="c4">events (name, parameter types, brief descriptions of the events and their parameters)</span></li><li class="c1 c34"><span class="c4">any required libraries, including their sizes and licenses</span></li><li class="c1 c34"><span class="c4">use cases</span></li></ul><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The brief descriptions should be similar to those in the </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/reference/index.html&amp;sa=D&amp;ust=1539767441437000">reference documentation</a></span><span class="c4">. &nbsp;Type information includes not just Java types (e.g., int) but any limitations on the domain or range (e.g., integers between 0 and 255, inclusive).</span></p><h1 class="c59" id="h.x6w7gmpy8h0"><span>4. </span><span class="c25 c61">Implementation</span></h1><p class="c1"><span>Whenever a new component is created or modified, a new copy of the Companion app has to be created too. For information on how to push a new Companion to your device please check </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://docs.google.com/document/pub?id%3D1Xc9yt02x3BRoq5m1PJHBr81OOv69rEBy8LVG_84j9jc%23h.3aibbept75tt&amp;sa=D&amp;ust=1539767441438000">this section</a></span><span>&nbsp;in the </span><span class="c23">how to build from sources</span><span>&nbsp;</span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://docs.google.com/document/pub?id%3D1Xc9yt02x3BRoq5m1PJHBr81OOv69rEBy8LVG_84j9jc&amp;sa=D&amp;ust=1539767441438000">document</a></span><span class="c4">.</span></p><h2 class="c39" id="h.hyf8k5q3u962"><span>4</span><span class="c25 c38">a. Creating an Icon</span></h2><p class="c1"><span>Each image should have a 16x16 icon in png format in the directory </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://code.google.com/p/app-inventor-releases/source/browse/appinventor/appengine/src/com/google/appinventor/images/&amp;sa=D&amp;ust=1539767441438000">appengine/src/com/google/appinventor/images</a></span><span class="c4">. &nbsp;The name of the file should be in lowerCamelCase with a lower-case extension &nbsp;For example, the name of the icon for the ImageSprite component is “imageSprite.png”. &nbsp;The image must be freely distributable without attribution.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>References to the icon must be made in several files. &nbsp;For the Twitter component, the following lines were added to </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://code.google.com/p/app-inventor-releases/source/browse/appinventor/appengine/src/com/google/appinventor/client/Images.java&amp;sa=D&amp;ust=1539767441439000">Images</a></span><span class="c4">:</span></p><p class="c1 c49"><span class="c10">/**</span></p><p class="c1 c49"><span class="c10">&nbsp;* Designer palette item: </span></p><p class="c1 c49"><span class="c10">&nbsp;*/</span></p><p class="c1 c49"><span class="c10">&nbsp;@Source("com/google/appinventor/images/twitter.png")</span></p><p class="c1 c49"><span class="c10">&nbsp;ImageResource twitterComponent()</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">The following line was added to SimpleComponentDescriptor:</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1 c49"><span class="c41 c36 c51">&nbsp; </span><span class="c19 c41 c36">bundledImages</span><span class="c19 c41 c36">.</span><span class="c19 c41 c36">put</span><span class="c19 c41 c36">(</span><span class="c19 c41 c36">"images/twitter.png"</span><span class="c19 c36 c41">,</span><span class="c19 c41 c36">&nbsp;images</span><span class="c19 c41 c36">.</span><span class="c19 c41 c36">twitterComponent</span><span class="c19 c41 c36">());</span></p><h2 class="c39" id="h.xymwl7c0e506"><span class="c25 c38">4b. Mocking the component</span></h2><p class="c1"><span>In addition to the real component code that runs on the device, each component is represented by a “mock” component in the Designer. &nbsp;For example, </span><span>Figure </span><span class="c4">3 shows a MockLabel and MockButton corresponding to the Label and Button created by the user. &nbsp;The mock components, which are indirect subclasses of MockComponent, should have an appearance as close as possible to the real component they represent. &nbsp;For example, changing the Image, Text, or TextColor properties of a Button in the Designer should cause the corresponding changes in the MockButton. &nbsp;This is trivial for non-visible components, which are all represented by MockNonVisibleComponent. &nbsp;A “gotcha” when mocking visible components is making sure the appearance is correct in all browsers (Chrome, Firefox, Internet Explorer, and Safari).</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>A discussion of how to make a </span><span>mock component</span><span>&nbsp;reflect its attribute values</span><span>&nbsp;is in </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://docs.google.com/document/pub?id%3D14c1X19s6pXYHdDBOJJELcmOghWbm2FPekRvGzX0ENps&amp;sa=D&amp;ust=1539767441442000">How to Add a Property to a Component</a></span><span>. &nbsp;If you need to create a new MockComponent, you should generally subclass an existing MockComponent (generally the mock corresponding to the superclass of your component).</span><span class="c4">&nbsp;</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>Once you have selected or created a MockComponent to represent your component, you will need to add a case to the method </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/client/editor/simple/palette/SimpleComponentDescriptor.html%23createMockComponent%2528java.lang.String,%2520com.google.appinventor.client.editor.simple.SimpleEditor%2529&amp;sa=D&amp;ust=1539767441442000">SimpleComponentDescriptor.createMockComponent()</a></span><span class="c4">.</span></p><h2 class="c39" id="h.joae7p4b8bs5"><span>4c. </span><span class="c25 c38">Declaring the Class</span></h2><p class="c1"><span>Each component is implemented as a class, which should be located in the </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/tree/master/appinventor/components/src/com/google/appinventor/components/runtime&amp;sa=D&amp;ust=1539767441443000">com.google.appinventor.component.runtime</a></span><span>&nbsp;package. &nbsp;Every component must be a subclass (possibly indirect) of </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/runtime/AndroidNonvisibleComponent.java&amp;sa=D&amp;ust=1539767441443000">AndroidNonVisibleComponent</a></span><span>&nbsp;or </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/runtime/AndroidViewComponent.java&amp;sa=D&amp;ust=1539767441444000">AndroidViewComponent</a></span><span>, as discussed </span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.xodxyr95cj6d">above</a></span><span>. &nbsp;Components classes must use the following </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html&amp;sa=D&amp;ust=1539767441444000">annotations</a></span><span>, </span><span>which are used to generate information for other parts of the system about components and their properties.</span></p><h3 class="c22" id="h.uozrajb9crsb"><span class="c19">SimpleObject</span><span class="c24">&nbsp;annotation</span></h3><p class="c1"><span>The annotation </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/annotations/SimpleObject.java&amp;sa=D&amp;ust=1539767441445000">SimpleObject</a></span><span class="c4">&nbsp;must precede the definition of any class that either defines or is a superclass of a component.</span></p><h3 class="c68" id="h.h2xxd1dq0v3x"><span class="c19">DesignerComponent</span><span>&nbsp;annotation</span></h3><p class="c1"><span>The </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/annotations/DesignerComponent.html&amp;sa=D&amp;ust=1539767441446000">DesignerComponent</a></span><span class="c4">&nbsp;annotation must precede the definition of any component that should appear in the Designer. &nbsp;There are seven elements:</span></p><ul class="c35 lst-kix_482voacspu5m-0 start"><li class="c1 c34"><span class="c40">int version</span><span class="c4">: the version number of the component. &nbsp;This should be incremented whenever a user-visible change is made (typically the addition of a property, method, or event.)</span></li><li class="c1 c34"><span class="c16 c40"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/common/ComponentCategory.html&amp;sa=D&amp;ust=1539767441446000">ComponentCategory</a></span><span class="c40">&nbsp;category</span><span>: the section of the Designer palette in which the component should appear (e.g., </span><span class="c19">ComponentCategory.Media</span><span class="c4">).</span></li><li class="c1 c34"><span class="c40">String description</span><span>: the user-level HTML description that appears in the reference documentation and when the user clicks on the question mark next to a component name in the Designer . &nbsp;(If this is omitted -- which it should not be -- the description in the Javadoc is used in its place.) &nbsp;The description should be similar to a </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html&amp;sa=D&amp;ust=1539767441447000">Javadoc</a></span><span>&nbsp;description of a class, except it is only for the user-visible aspects of the component. &nbsp;The first sentence should provide a summary description, and subsequent sentences or paragraphs should explain how it is used. &nbsp;Some good examples of component descriptions are those for </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/reference/components/basic.html%23Canvas&amp;sa=D&amp;ust=1539767441447000">Canvas</a></span><span>, </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/reference/components/basic.html%23ListPicker&amp;sa=D&amp;ust=1539767441448000">ListPicker</a></span><span>, </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/reference/components/basic.html%23TinyDB&amp;sa=D&amp;ust=1539767441448000">TinyDB</a></span><span>, </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/reference/components/social.html%23PhoneCall&amp;sa=D&amp;ust=1539767441448000">PhoneCall</a></span><span>, and </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/reference/components/sensors.html%23AccelerometerSensor&amp;sa=D&amp;ust=1539767441448000">AccelerometerSensor</a></span><span class="c4">.</span></li><li class="c1 c34"><span class="c40">String iconName</span><span class="c4">: the last part of the path to the image used in the Designer’s palette and to be used in the automatically generated reference documentation. &nbsp;For example, for Clock, the value is “images/clock.png”. &nbsp;</span></li><li class="c1 c34"><span class="c40">boolean nonVisible</span><span>: by default </span><span class="c19">false</span><span>, this should be set to </span><span class="c19">true</span><span class="c4">&nbsp;for components that are not visible on the device screen, such as the Clock or LocationSensor components.</span></li><li class="c1 c34"><span class="c40">boolean showOnPalette</span><span>: by default </span><span class="c19">true</span><span>, this should be set to </span><span class="c19">false</span><span class="c4">&nbsp;for experimental components under development when doing a publicly-visible build.</span></li></ul><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">Figure 4 shows the complete annotations for the LocationSensor component, beginning with DesignerComponent.</span></p><h3 class="c22" id="h.4f8sk670wdrv"><span class="c19">UsesPermissions</span><span class="c24">&nbsp;annotation</span></h3><p class="c1"><span>The </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/annotations/UsesPermissions.html&amp;sa=D&amp;ust=1539767441451000">UsesPermissions</a></span><span>&nbsp;annotation has a single element, </span><span class="c19">permissionNames</span><span>, a comma-delimited String with constant permission strings from </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/Manifest.permission.html&amp;sa=D&amp;ust=1539767441451000">Android.manifest.Permission</a></span><span>, such as “</span><span class="c19">android.permission.CAMERA</span><span>”. &nbsp;A longer example is shown in </span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.9c0ocmd3so8l">Figure 4</a></span><span>. &nbsp;This may be omitted for components that do not require any special permissions, such as Clock.</span></p><p class="c5 c7"><span class="c4"></span></p><a id="t.709ba67dd07b83eb9b5922d16b874f07072c61e1"></a><a id="t.4"></a><table class="c47"><tbody><tr class="c26"><td class="c33 c54" colspan="1" rowspan="1"><p class="c1"><span class="c40 c15">@DesignerComponent</span><span class="c19 c15">(</span><span class="c40 c15">version</span><span class="c19 c15">&nbsp;= YaVersion.LOCATIONSENSOR_COMPONENT_VERSION,<br> &nbsp; </span><span class="c19 c15">&nbsp;</span><span class="c40 c15">description</span><span class="c40 c23 c15">&nbsp;</span><span class="c19 c15">= "&lt;p&gt;Non-visible component providing location information, " +<br> &nbsp; &nbsp;"including longitude, latitude, altitude (if supported by the device), " +<br> &nbsp; &nbsp;"and address. &nbsp;This can also perform \"geocoding\", converting a given " +<br> &nbsp; &nbsp;"address (not necessarily the current one) to a latitude (with the " +<br> &nbsp; &nbsp;"&lt;code&gt;LatitudeFromAddress&lt;/code&gt; method) and a longitude (with the " +<br></span><span class="c19 c33 c15">&nbsp; &nbsp; "&lt;code&gt;LongitudeFromAddress&lt;/code&gt; method).&lt;/p&gt;" +<br> &nbsp; &nbsp;"&lt;p&gt;In order to function, the component must have its " +<br> &nbsp; &nbsp;"&lt;code&gt;Enabled&lt;/code&gt; property set to True, and the device must have " +<br> &nbsp; &nbsp;"location sensing enabled through either wireless networks or GPS " +<br> &nbsp; &nbsp;"satellites (if outside).&lt;/p&gt;",<br> &nbsp; &nbsp;</span><span class="c40 c33 c15">category </span><span class="c19 c33 c15">= ComponentCategory.SENSORS,<br> &nbsp; &nbsp;</span><span class="c40 c33 c15">nonVisible </span><span class="c19 c33 c15">= true,<br> &nbsp; &nbsp;</span><span class="c40 c33 c15">iconName </span><span class="c28 c19 c33 c15">= "images/locationSensor.png")</span></p><p class="c1"><span class="c40 c33 c15">@SimpleObject</span><span class="c19 c33 c15"><br></span><span class="c40 c33 c15">@UsesPermissions</span><span class="c28 c19 c33 c15">(permissionNames =<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "android.permission.ACCESS_FINE_LOCATION," +<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "android.permission.ACCESS_COARSE_LOCATION," +<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "android.permission.ACCESS_MOCK_LOCATION," +<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "android.permission.ACCESS_LOCATION_EXTRA_COMMANDS")</span></p><p class="c1 c7"><span class="c4 c33"></span></p><a id="id.9c0ocmd3so8l"></a><p class="c5"><span class="c33 c23">Figure </span><span class="c33 c23">4: The complete set of annotations for LocationSensor.</span></p></td></tr></tbody></table><h2 class="c39" id="h.pf40xv3glv5o"><span>4d. </span><span class="c25 c38">Properties</span></h2><p class="c1"><span>Each property has a getter and/or setter with the same name. &nbsp;</span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.o5fl02lv700d">Figure </a></span><span>5</span><span class="c4">&nbsp;shows the declarations and partial implementation of the Canvas component’s PaintColor property. &nbsp;Some points to note:</span></p><ul class="c35 lst-kix_gzsatngjqsgd-0 start"><li class="c1 c34"><span>Getters and setters should be present only if the user should be able to read and write the property value, respectively, in either the Designer or Blocks Editor. &nbsp;While most properties can be both read and written, LocationSensor.Latitude, for example, is read-only, so only has a getter. &nbsp;ListPicker.ElementsFromString is write-only, so only has a setter. &nbsp;You may wish to review </span><span>the earlier discussion of property access</span><span class="c4">.</span></li><li class="c1 c34"><span class="c4">The names of the getters and setters violate the ordinary Java style guidelines that method names be in lowerCamelCase and be verbs. &nbsp;Instead, the method names should be the UpperCamelCase property names.</span></li><li class="c1 c34"><span class="c4">Usually, property values are backed by a private instance variable. &nbsp;The getter (if present) simply returns this value. &nbsp;The setter (if present) sets the backing variable and may have additional logic to change the component’s appearance (e.g., Label.Text), internal state (e.g., Canvas.PaintColor), or behavior (e.g., Timer.Enabled).</span></li></ul><p class="c1 c7"><span class="c4"></span></p><a id="t.0e3fda64cd529352687aa75389df9ae1cbcd812e"></a><a id="t.5"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c1"><span class="c10">/**<br> &nbsp; * Returns the currently specified paint color as an alpha-red-green-blue<br> &nbsp; * integer, i.e., {@code 0xAARRGGBB}. &nbsp;An alpha of {@code 00}<br> &nbsp; * indicates fully transparent and {@code FF} means opaque.<br> &nbsp; *<br> &nbsp; * @return paint color in the format 0xAARRGGBB, which includes alpha,<br> &nbsp; * red, green, and blue components<br> &nbsp; */<br> &nbsp;@SimpleProperty(<br> &nbsp; &nbsp; &nbsp;description = "The color in which lines are drawn",<br> &nbsp; &nbsp; &nbsp;category = PropertyCategory.APPEARANCE)<br> &nbsp;public int PaintColor() {<br> &nbsp; &nbsp;return paintColor;<br> &nbsp;}<br><br> &nbsp;/**<br> &nbsp; * Specifies the paint color as an alpha-red-green-blue integer,<br> &nbsp; * i.e., {@code 0xAARRGGBB}. &nbsp;An alpha of {@code 00} indicates fully<br> &nbsp; * transparent and {@code FF} means opaque.<br> &nbsp; *<br> &nbsp; * @param argb paint color in the format 0xAARRGGBB, which includes<br> &nbsp; * alpha, red, green, and blue components<br> &nbsp; */<br> &nbsp;@DesignerProperty(editorType = DesignerProperty.PROPERTY_TYPE_COLOR,<br> &nbsp; &nbsp; &nbsp;defaultValue = Component.DEFAULT_VALUE_COLOR_BLACK)<br> &nbsp;@SimpleProperty<br> &nbsp;public void PaintColor(int argb) {<br> &nbsp; &nbsp;paintColor = argb;<br> &nbsp; &nbsp;changePaint(paint, argb);<br> &nbsp;}</span></p><a id="kix.xme3etm26aeq"></a><p class="c5"><span class="c3">Figure 5: Part of the implementation of the Canvas component’s PaintColor property.</span></p><p class="c14 c7"><span class="c4"></span></p></td></tr></tbody></table><h3 class="c22" id="h.kvd4wbvn6ts"><span class="c19">SimpleProperty</span><span class="c24">&nbsp;annotation</span></h3><p class="c1"><span>Every property getter and setter should be preceded by a </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/annotations/SimpleProperty.html&amp;sa=D&amp;ust=1539767441458000">SimpleProperty</a></span><span>&nbsp;annotation, as shown in </span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.o5fl02lv700d">Figure </a></span><span>5</span><span class="c4">.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The first of the annotation’s three elements, </span><span class="c19">category</span><span>, is no longer used. &nbsp;In the past, properties were divided into the categories “Behavior”, “Appearance”, and “Deprecated” for documentation purposes. &nbsp;For example, </span><span class="c19">Sprite.Enabled</span><span>&nbsp;was in the “Behavior” category, while </span><span class="c19">Sprite.Visible</span><span class="c4">&nbsp;was in the “Appearance” category. &nbsp;We have dropped this distinction, partly because not all properties fit cleanly into such categories.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The </span><span class="c19">description</span><span>&nbsp;element is used in </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://beta.appinventor.mit.edu/learn/reference/components/basic.html%23Canvas&amp;sa=D&amp;ust=1539767441460000">the reference documentation</a></span><span>&nbsp;and in </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://en.wikipedia.org/wiki/Tooltip&amp;sa=D&amp;ust=1539767441460000">tool tips</a></span><span>&nbsp;within the Designer (</span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.djdqxchw6xpe">Figure 6</a></span><span class="c4">). &nbsp;The description is for the property itself, as opposed to having separate ones for the getter and setter. &nbsp;The description may be included in the annotation before the getter or setter but should not be in both. &nbsp;(While doing so does no harm, it may lead to unexpected results, if the two descriptions differ, and increases maintenance.)</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 243.00px; height: 100.00px;"><img alt="" src="./How to Add a Component_files/tooltip.png" style="width: 243.00px; height: 100.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><a id="id.djdqxchw6xpe"></a><p class="c5"><span class="c23">Figure 6: A tool tip within the Designer. &nbsp;<br>This comes from the code in </span><span class="c16 c23"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.o5fl02lv700d">Figure 4</a></span><span class="c3">.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The </span><span class="c19">userVisible</span><span>&nbsp;element, which by default is </span><span class="c19">true</span><span>, specifies whether the property is accessible in the Blocks Editor. &nbsp;This element (and the ability to set it to </span><span class="c19">false</span><span>) was added to support the Row and Column properties, so they could be indirectly set in the Designer but not accessed in the Blocks Editor. &nbsp;Some other properties that can be set in the Designer have &nbsp; </span><span class="c19">userVisible</span><span>&nbsp;values of </span><span class="c19">false</span><span class="c4">, such as Canvas.TextAlignment, to prevent the user from setting it to an illegal value (anything other than “left”, “right”, or “center”).</span></p><h3 class="c22" id="h.ffjkjrtbh2la"><span class="c19">DesignerProperty</span><span class="c24">&nbsp;annotation</span></h3><p class="c1"><span>While every property getter and setter should have the </span><span class="c19">SimpleProperty</span><span>&nbsp;annotation, the </span><span class="c19">DesignerProperty</span><span>&nbsp;annotation should only be used for the setter of properties visible in the Designer. &nbsp;Some </span><span class="c23">&nbsp;</span><span>examples or properties </span><span class="c23">not </span><span class="c4">visible in the Designer are Row, Column, and LocationSensor.Latitude. &nbsp;</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The first of </span><span class="c19">DesignerProperty</span><span>’s two elements is </span><span class="c19">defaultValue</span><span>, a String that gives the initial value of the property. &nbsp;(If not specified, it is the empty string.) &nbsp;For Canvas.PaintColor (</span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.o5fl02lv700d">Figure 5</a></span><span>), the default value is </span><span class="c19">Component.DEFAULT_VALUE_COLOR_BLACK</span><span>, one of many useful constants defined in</span><span>&nbsp;</span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/Component.html&amp;sa=D&amp;ust=1539767441463000">Component</a></span><span class="c4">. </span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The second of </span><span class="c19">DesignerProperty</span><span>’s two elements is </span><span class="c19">editorType</span><span>, which specifies the PropertyEditor used for entering the property value within the Designer. &nbsp;(See </span><span>the earlier discussion of property editors</span><span>.) &nbsp;</span><span>For Canvas.PaintColor, </span><span>the PropertyEditor is </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/client/editor/youngandroid/properties/YoungAndroidColorChoicePropertyEditor.html&amp;sa=D&amp;ust=1539767441464000">YoungAndroidColorChoicePropertyEditor</a></span><span>, which lets the user choose among a set of predefined colors, as shown in </span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.ftfzlpggogk3">Figure 6</a></span><span>. </span><span class="c4">&nbsp;(Additional colors can be specified programmatically in the Blocks Editor.) &nbsp;</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The separate document </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://docs.google.com/document/pub?id%3D14c1X19s6pXYHdDBOJJELcmOghWbm2FPekRvGzX0ENps&amp;sa=D&amp;ust=1539767441465000">How to Add a Property to a Component</a></span><span>&nbsp;describes </span><span>how to create a new PropertyEditor</span><span>&nbsp;if no existing one (</span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.87io6y5poewv">Table 2</a></span><span class="c4">) meets your needs.</span></p><h3 class="c22" id="h.47v7y68moh2v"><span class="c24">Hiding a property defined in a superclass</span></h3><p class="c1"><span>Occasionally, it is desirable to hide a property defined in a superclass. &nbsp;For example, as an indirect subclass of </span><span class="c19">VisibleComponent</span><span>, Ball inherits the </span><span class="c19">Height</span><span>&nbsp;and </span><span class="c19">Width</span><span>&nbsp;properties. &nbsp;We do not want to expose these to the user, since the more appropriate abstraction is the </span><span class="c19">Radius</span><span>&nbsp;property, which guarantees that the Ball’s height and width are identical. &nbsp;To hide </span><span class="c19">Height</span><span>&nbsp;and </span><span class="c19">Width</span><span>&nbsp;from the user, they are overridden in Ball.java but </span><span class="c23">not</span><span>&nbsp;annotated with </span><span class="c19">SimpleProperty</span><span>&nbsp;and </span><span class="c19">DesignerProperty</span><span>, as shown in </span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.eqyll4lk7dy4">Figure 7</a></span><span class="c4">. &nbsp;This same trick should work to hide methods and events.</span></p><p class="c5 c7"><span class="c23 c36 c70"></span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 168.00px; height: 466.00px;"><img alt="" src="./How to Add a Component_files/Screenshot-1.png" style="width: 168.00px; height: 466.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><a id="id.ftfzlpggogk3"></a><p class="c5"><span class="c23">Figure 6: Setting </span><span class="c17">Canvas.BackgroundColor</span><span class="c23">&nbsp;with </span><span class="c17">YoungAndroidColorChoicePropertyEditor</span><span class="c3">.</span></p><p class="c5 c7"><span class="c3"></span></p><a id="t.effe2e67279e7c81d1ba87ccdcef4f812d247312"></a><a id="t.6"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c1"><span class="c10">// The following methods are required by abstract superclass<br>// VisibleComponent. &nbsp;Because we don't want to expose them to the<br>// programmer, we omit the SimpleProperty and DesignerProperty pragmas.<br>@Override<br>public int Height() {<br> &nbsp;return 2 * radius;<br>}<br><br>@Override<br>public void Height(int height) {<br> &nbsp;// ignored<br>}</span></p><p class="c1 c7"><span class="c10"></span></p><a id="kix.ikzw88gfvqwk"></a><p class="c5"><span class="c3">Figure 7: Hiding properties in a subclass</span></p></td></tr></tbody></table><p class="c5 c7"><span class="c3"></span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.d9071f34928e1733205a6da0feeedb06f4691264"></a><a id="t.7"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c1"><span class="c10">/**</span></p><p class="c1"><span class="c10">&nbsp;* &lt;p&gt;Gets the color of the given pixel, ignoring sprites.&lt;/p&gt;</span></p><p class="c1"><span class="c10">&nbsp;*</span></p><p class="c1"><span class="c10">&nbsp;* @param x the x-coordinate</span></p><p class="c1"><span class="c10">&nbsp;* @param y the y-coordinate</span></p><p class="c1"><span class="c10">&nbsp;* @return the color at that location as an alpha-red-blue-green integer,</span></p><p class="c1"><span class="c10">&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; or {@link Component#COLOR_NONE} if that point is not on this<br> * &nbsp; &nbsp; &nbsp; &nbsp; Canvas</span></p><p class="c1"><span class="c10">&nbsp;*/</span></p><p class="c1"><span class="c10">@SimpleFunction(description = "Gets the color of the specified point. "</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; + "This includes the background and any drawn points, lines, or "</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; + "circles but not sprites.")</span></p><p class="c1"><span class="c10">public int GetBackgroundPixelColor(int x, int y) {</span></p><p class="c1"><span class="c10">&nbsp; return view.getBackgroundPixelColor(x, y);</span></p><p class="c1"><span class="c10">}</span></p><a id="id.1tu0vl5bayn4"></a><p class="c5"><span class="c23">Figure 8: The method Canvas.GetBackgroundPixelColor()</span></p></td></tr></tbody></table><h2 class="c39" id="h.mpnffe8nvqu4"><span class="c25 c38">4e. Methods</span></h2><p class="c1"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.5eyw4qcupf9h">Figure 8</a></span><span>&nbsp;shows an example of a method: </span><span class="c19">Canvas.GetBackgroundPixelColor()</span><span class="c4">. &nbsp;Overloading is not permitted. &nbsp;The indirect way to support a variable number of arguments is to take a List as an argument, since the length of the List is not part of the type specification.</span></p><h3 class="c22" id="h.u5hgt3ltmhbc"><span class="c24">SimpleFunction annotation</span></h3><p class="c1"><span>The </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/annotations/SimpleFunction.html&amp;sa=D&amp;ust=1539767441474000">SimpleFunction</a></span><span>&nbsp;annotation has two elements: </span><span class="c19">description</span><span>&nbsp;and </span><span class="c19">userVisible</span><span>, whose meanings parallel those for </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/annotations/SimpleProperty.html&amp;sa=D&amp;ust=1539767441474000">SimpleProperty</a></span><span>. &nbsp;A description, used for tootips and reference documentation, should always be provided. &nbsp;The default value of </span><span class="c19">userVisible</span><span>&nbsp;is true. &nbsp;It is typically only false for deprecated methods (such as </span><span class="c19">VideoPlayer.VideoPlayerError()</span><span class="c4">) or ones under internal development.</span></p><h3 class="c22" id="h.8te56x1w9u8b"><span class="c24">Launching threads</span></h3><p class="c1"><span>All user code and most component code runs in the Android UI thread, as </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://docs.google.com/a/google.com/document/d/1l9qLSIlxFgootg-IYSwEEqp3yjpoN_u0yxPAhq0aB94/edit%23heading%3Dh.b2hif7n9ob2q&amp;sa=D&amp;ust=1539767441475000">discussed above</a></span><span>. &nbsp;The exceptions are components such as Twitter, Web, and TinyWebDB, which perform actions (sending web requests) that need not and should not (for performance reasons) run in the UI thread.</span><span>&nbsp; </span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.rnd3rg5v19c8">Figure 9</a></span><span>&nbsp;shows part of the implementation of the Get method of the </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/runtime/Web.java&amp;sa=D&amp;ust=1539767441475000">Web</a></span><span>&nbsp;component, which makes use of our utility class </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/runtime/util/AsynchUtil.java&amp;sa=D&amp;ust=1539767441476000">AsynchUtil</a></span><span>, which launches a Runnable (e.g., a request to fetch a certain web page) in a new non-UI thread. &nbsp;</span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.yguqv0twqj7m">Figure 10</a></span><span>&nbsp;shows how the event handler </span><span>GotText</span><span class="c4">&nbsp;is launched in the UI thread after the response has been received.</span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.8c5d10b2493fce46ac40fee0c679a6191aae48ab"></a><a id="t.8"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c14"><span class="c10">/**<br> * Performs an HTTP GET request using the Url property and retrieves the &nbsp;</span></p><p class="c14"><span class="c10">&nbsp;* response.&lt;br&gt;<br> * If the SaveResponse property is true, the response will be saved in a<br> * file and the GotFile event will be triggered. The ResponseFileName<br> * property can be used to specify the name of the file.&lt;br&gt;<br> * If the SaveResponse property is false, the GotText event will be<br> * triggered.<br> */<br>@SimpleFunction<br>public void Get() {<br> &nbsp;// Capture property values in local variables before running</span></p><p class="c14"><span class="c19 c36">&nbsp; // asynchronously.<br> &nbsp;final CapturedProperties webProps = capturePropertyValues("Get");<br><br> &nbsp;</span><span class="c6">AsynchUtil.runAsynchronously(</span><span class="c19 c36">new Runnable() {<br> &nbsp; &nbsp;@Override<br> &nbsp; &nbsp;public void run() {<br> &nbsp; &nbsp; &nbsp;try {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">performRequest(webProps, null, null);</span><span class="c19 c36"><br> &nbsp; &nbsp; &nbsp;} catch (FileUtil.FileException e) {<br> &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(Web.this, "Get",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.getErrorMessageNumber());<br> &nbsp; &nbsp; &nbsp;} catch (Exception e) {<br> &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(Web.this, "Get",<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_WEB_UNABLE_TO_GET, webProps.urlString);<br> &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br> &nbsp;}</span><span class="c6">);</span><span class="c10"><br>}</span></p><a id="id.rnd3rg5v19c8"></a><p class="c9"><span class="c23">Figure 9: The Get method of the Web component. &nbsp;It creates a Runnable that calls the method performRequest() (</span><span class="c16 c23"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.yguqv0twqj7m">Figure 10</a></span><span class="c23">) do the real work of opening the HTTP connection, generating and sending the request headers and cookies, and waiting for the response. &nbsp;The call to </span><span class="c16 c23"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/util/AsynchUtil.html&amp;sa=D&amp;ust=1539767441478000">AsynchUtil.runAsynchronously() </a></span><span class="c3">causes these actions to occur in a new non-UI thread. </span></p></td></tr></tbody></table><p class="c1 c7"><span class="c4"></span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.b3cc746e028cb5eabf37273173033f3b63796071"></a><a id="t.9"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c14"><span class="c10">private void performRequest(final CapturedProperties webProps,</span></p><p class="c14"><span class="c19 c36">&nbsp; &nbsp; byte[] postData, String postFile) throws IOException {</span></p><p class="c14"><span class="c19 c36">&nbsp; HttpURLConnection connection = openConnect(webProps);</span></p><p class="c14"><span class="c10">&nbsp; [:]</span></p><p class="c14"><span class="c10">&nbsp; &nbsp; try {</span></p><p class="c14"><span class="c19 c36">&nbsp; &nbsp; &nbsp; [:]<br> &nbsp; &nbsp; &nbsp;// Dispatch the event.<br> &nbsp; &nbsp; </span><span class="c6">&nbsp;activity.runOnUiThread(</span><span class="c19 c36">new Runnable() {<br> &nbsp; &nbsp; &nbsp; &nbsp;@Override<br> &nbsp; &nbsp; &nbsp; &nbsp;public void run() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c28 c6">GotText(webProps.urlString, responseCode, responseType,</span></p><p class="c14"><span class="c6">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; responseContent);<br></span><span class="c19 c36">&nbsp; &nbsp; &nbsp; &nbsp; }<br> &nbsp; &nbsp; &nbsp;}</span><span class="c28 c6">);</span></p><p class="c14"><span class="c10">&nbsp; [:]</span></p><p class="c14"><span class="c10">}</span></p><p class="c14 c7"><span class="c4"></span></p><a id="id.yguqv0twqj7m"></a><p class="c9"><span class="c23">Figure 10: The portion of Web.performRequest() that launches the user GetText event handler after the response has been received. &nbsp;The method call </span><span class="c11 c23"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/app/Activity.html%23runOnUiThread(java.lang.Runnable)&amp;sa=D&amp;ust=1539767441483000">activity.runOnUiThread()</a></span><span class="c3">&nbsp;causes the event handler code to run in the UI thread.</span></p></td></tr></tbody></table><h2 class="c39" id="h.fnbbxzbsom4x"><span>4f. Events</span></h2><p class="c1"><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.vtw5gwdf26ec">Figure 11</a></span><span>&nbsp;shows an example of an event: Clock.Timer(). &nbsp;Events are ordinary methods that generally trigger calls to the user-written event handler by calling </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/EventDispatcher.html%23dispatchEvent%2528com.google.appinventor.components.runtime.Component,%2520java.lang.String,%2520java.lang.Object...%2529&amp;sa=D&amp;ust=1539767441484000">EventDispatcher.dispatchEvent()</a></span><span class="c4">. &nbsp;The event dispatcher makes sure that the user-written event handlers do not interrupt each other or other user code. &nbsp;</span></p><h3 class="c22" id="h.wf1oegp563if"><span class="c24">SimpleEvent annotation</span></h3><p class="c1"><span>The </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/annotations/SimpleEvent.html&amp;sa=D&amp;ust=1539767441485000">SimpleEvent</a></span><span>&nbsp;annotation has the same two elements as </span><span class="c19">SimpleFunction</span><span>: </span><span class="c19">description</span><span>&nbsp;</span><span>and </span><span class="c19">userVisible</span><span class="c4">, which has a default value of true.</span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.a3ce17ac1bad89879cc36b10dc50eb262acace37"></a><a id="t.10"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c1"><span class="c10">&nbsp;@SimpleEvent(description = "Timer has gone off.")<br> public void Timer() {<br> &nbsp; if (timerAlwaysFires || onScreen) {<br> &nbsp; &nbsp; EventDispatcher.dispatchEvent(this, "Timer");<br> &nbsp; }<br> }</span></p><p class="c5"><span><br></span><a id="kix.d15x4ap0sdd1"></a><span class="c3">Figure 11: The method Clock.Timer(), which enqueues a call to the </span></p><p class="c5"><span class="c23">user-defined event handler, if present.</span></p></td></tr></tbody></table><h2 class="c32" id="h.2nnznhhjiea1"><span>4g. Managing the Activity life cycle</span></h2><p class="c1"><span>A single App Inventor app can consistent of multiple </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/hardware/SensorManager.html%23unregisterListener(android.hardware.SensorEventListener)&amp;sa=D&amp;ust=1539767441489000">Activity</a></span><span>&nbsp;instances, some of them dynamic. &nbsp;While </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/Form.html&amp;sa=D&amp;ust=1539767441489000">Form</a></span><span>&nbsp;is the only component to subclass </span><span class="c19">Activity</span><span>, many components launch an </span><span class="c19">Activity</span><span class="c4">, including:</span></p><ul class="c35 lst-kix_bovizmomu0la-0 start"><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/src/com/google/appinventor/components/runtime/ActivityStarter.java&amp;sa=D&amp;ust=1539767441490000">ActivityStarter</a></span><span>, which launches a user-specified </span><span class="c19">Activity</span><span class="c4">.</span></li><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/src/com/google/appinventor/components/runtime/BarcodeScanner.java&amp;sa=D&amp;ust=1539767441491000">BarcodeScanner</a></span><span>, which launches an </span><span class="c19">Activity</span><span>&nbsp;that can handle the </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://zxing.org/w/docs/javadoc/com/google/zxing/client/android/Intents.Scan.html&amp;sa=D&amp;ust=1539767441491000">SCAN</a></span><span class="c4">&nbsp;intent.</span></li><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/src/com/google/appinventor/components/runtime/Form.java&amp;sa=D&amp;ust=1539767441492000">Form</a></span><span>&nbsp;(Screen), which launches an </span><span class="c19">Activity</span><span class="c4">&nbsp;when the user switches screens.</span></li><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/src/com/google/appinventor/components/runtime/ListPicker.java&amp;sa=D&amp;ust=1539767441493000">ListPicker</a></span><span>, which creates and launches a new </span><span class="c19">Activity</span><span class="c4">&nbsp;when opened.</span></li></ul><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>Some components need to take into account the </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/app/Activity.html%23ActivityLifecycle&amp;sa=D&amp;ust=1539767441493000">Activity life cycle</a></span><span>&nbsp;in order to behave properly or avoid excessive CPU or battery usage. &nbsp;For example, </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/src/com/google/appinventor/components/runtime/OrientationSensor.java&amp;sa=D&amp;ust=1539767441494000">OrientationSensor</a></span><span>&nbsp;stops responding to changes in the phone’s position when the associated </span><span class="c19">Activity</span><span class="c4">&nbsp;is paused and restarts when it is removed. &nbsp;We provide the following interfaces to respond to life cycle changes.</span></p><ul class="c35 lst-kix_70mw4a2yzwhg-0 start"><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/OnPauseListener.html&amp;sa=D&amp;ust=1539767441495000">OnPauseListener</a></span><span class="c4">: The onPause() method is called right before either (1) a different Activity is resumed or (2) the device’s display is turned off.</span></li><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/OnResumeListener.html&amp;sa=D&amp;ust=1539767441495000">OnResumeListener</a></span><span>: The onResume() method is guaranteed to be called when the component’s Activity is resumed after being paused. &nbsp;</span><span class="c23">It also may be called early in the component’s life before onPause() has ever been called.</span></li><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/OnStopListener.html&amp;sa=D&amp;ust=1539767441496000">OnStopListener</a></span><span class="c4">: The onStop() method is called when the component is no longer visible to the user, such as when a ListPicker opens in front of it, or the Home button is pressed.</span></li><li class="c1 c34"><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/OnPauseListener.html&amp;sa=D&amp;ust=1539767441497000">OnDestroyListener</a></span><span class="c4">: The onDestroy() method is called when its Activity is about to be destroyed.</span></li></ul><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>A single action can cause more than one of these methods to be called. &nbsp;For example, when the user presses the Home button, the </span><span class="c19">onPause()</span><span>&nbsp;and </span><span class="c19">onStop()</span><span>&nbsp;methods are called. &nbsp;Assuming the OS doesn’t need the memory and destroy the app, returning to it (whether through the phone’s launcher, the Back button, or the Recent Apps button) causes the </span><span class="c19">onResume()</span><span class="c4">&nbsp;method to be called. </span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>As an example of how the methods are used, consider </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/src/com/google/appinventor/components/runtime/Sound.java&amp;sa=D&amp;ust=1539767441498000">Sound</a></span><span class="c4">, which has the following methods:</span></p><ul class="c35 lst-kix_xzbnyyg4kqxe-0 start"><li class="c1 c34"><span class="c19">onStop()</span><span class="c4">, which pauses whatever sound is being played.</span></li><li class="c1 c34"><span class="c19">onResume()</span><span class="c4">, which resumes any sound that was paused.</span></li><li class="c1 c34"><span class="c19">onDestroy()</span><span>, which removes application-related resources from the </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/media/SoundPool.html&amp;sa=D&amp;ust=1539767441499000">SoundPool</a></span><span class="c4">.</span></li></ul><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>In order to receive the method calls, a component must register itself with its container, usually a Form. &nbsp;</span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.6mwudgd8j7s">Figure 12</a></span><span>&nbsp;shows some relevant code from </span><span class="c19">Sound</span><span class="c4">.</span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.44cfd8c2d82e2556d2b99fccaf4a6245d3479126"></a><a id="t.11"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c14"><span class="c10">public class Sound extends AndroidNonvisibleComponent</span></p><p class="c14"><span class="c19 c36">&nbsp; &nbsp; implements Component, </span><span class="c6">OnResumeListener</span><span class="c19 c36">, </span><span class="c6">OnStopListener</span><span class="c10">,</span></p><p class="c14"><span class="c19 c36">&nbsp; &nbsp; </span><span class="c6">OnDestroyListener</span><span class="c10">, Deleteable {</span></p><p class="c14"><span class="c10">&nbsp; public Sound(ComponentContainer container) {</span></p><p class="c14"><span class="c10">&nbsp; &nbsp; super(container.$form());</span></p><p class="c14"><span class="c10">&nbsp; &nbsp; soundPool = new SoundPool(MAX_STREAMS, AudioManager.STREAM_MUSIC, 0);</span></p><p class="c14"><span class="c10">&nbsp; &nbsp; :</span></p><p class="c14"><span class="c28 c6">&nbsp; &nbsp; form.registerForOnResume(this);</span></p><p class="c14"><span class="c28 c6">&nbsp; &nbsp; form.registerForOnStop(this);</span></p><p class="c14"><span class="c28 c6">&nbsp; &nbsp; form.registerForOnDestroy(this);</span></p><p class="c14"><span class="c10">&nbsp; &nbsp; :</span></p><p class="c14"><span class="c10">&nbsp; }</span></p><p class="c14 c7"><span class="c4"></span></p><p class="c14"><span class="c28 c6">&nbsp; // OnStopListener implementation</span></p><p class="c14 c7"><span class="c28 c6"></span></p><p class="c14"><span class="c28 c6">&nbsp; @Override</span></p><p class="c14"><span class="c6 c28">&nbsp; public void onStop() {</span></p><p class="c14"><span class="c28 c6">&nbsp; &nbsp; if (streamId != 0) {</span></p><p class="c14"><span class="c28 c6">&nbsp; &nbsp; &nbsp; soundPool.pause(streamId);</span></p><p class="c14"><span class="c28 c6">&nbsp; &nbsp; }</span></p><p class="c14"><span class="c28 c6">&nbsp; }</span></p><p class="c14"><span class="c4">&nbsp; :</span></p><p class="c14"><span class="c4">}</span></p><a id="id.6mwudgd8j7s"></a><p class="c9"><span class="c23">Figure 12: Activity life cycle code in Sound. &nbsp;The </span><span class="c17">onResume()</span><span class="c23">&nbsp;and </span><span class="c17">onDestroy() </span><span class="c23">methods <br>have been omitted for space.</span></p></td></tr></tbody></table><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>An analogous interface and method, </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/Deleteable.html%23onDelete()&amp;sa=D&amp;ust=1539767441510000">Deleteable.onDelete()</a></span><span>&nbsp;exists for components that need to do something when they are dynamically deleted (usually through the interpreter). &nbsp;Such components do </span><span class="c23">not</span><span>&nbsp;need to register themselves. &nbsp;If they are declared as implementing </span><span class="c19">Deleteable</span><span>, they will be deleted by </span><span class="c19">Form.deleteComponent()</span><span>.</span></p><h2 class="c32" id="h.3kn0fmfydnq1"><span>4h. Including external libraries</span></h2><p class="c1"><span class="c4">Some components, such as Twitter, require external libraries (twitter4j.jar). &nbsp;Here is how to add a jar file referenced by your component source file.</span></p><h3 class="c22" id="h.4jyv4s6bnjrd"><span class="c24">Adding to appinventor/lib</span></h3><p class="c1"><span class="c4">The appinventor/lib directory contains one subdirectory for each external library. &nbsp;For example, there is a subdirectory appinventor/lib/twitter. &nbsp;Each of these subdirectories should contain the following files:</span></p><ul class="c35 lst-kix_c43lravhtfhh-0 start"><li class="c1 c34"><span class="c19">LICENSE</span><span class="c4">: a text file with the license under which the library was made available.</span></li><li class="c1 c34"><span class="c19">README</span><span class="c4">: a text file detailing where the library was downloaded from and/or how it was built.</span></li><li class="c1 c34"><span class="c4">one or more jar files</span></li></ul><h3 class="c22" id="h.d7mp7drzzza"><span class="c24">Adding to build.xml</span></h3><p class="c1"><span class="c4">The path to the new library should be added to the build.xml files wherever there are references to the Twitter library:</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &lt;pathelement location=${lib.dir}/twitter/twitter4j-2.0.10-SNAPSHOT.jar” /&gt;</span></p><p class="c1 c7"><span class="c10"></span></p><p class="c1"><span class="c4">At the time of the writing of this document, these locations are:</span></p><ul class="c35 lst-kix_o669e1g9tkoj-0 start"><li class="c1 c34"><span class="c19">appinventor/build.xml</span><span>: </span><span class="c19">javadoc</span><span class="c4">&nbsp;target</span></li><li class="c1 c34"><span class="c19">appinventor/buildserver/build.xml</span><span>: </span><span class="c19">BuildServer</span><span class="c4">&nbsp;target</span></li><li class="c1 c34"><span class="c19">appinventor/components/build.xml</span><span>: </span><span class="c19">AndroidRuntime</span><span class="c4">&nbsp;target</span></li><li class="c1 c34"><span class="c19">appinventor/components/build.xml</span><span>: </span><span class="c19">ai.apt </span><span class="c4">macro definition </span></li></ul><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>If the Javadoc in your component links to the Javadoc for the external library, you should also add a link entry to the </span><span class="c19">javadoc</span><span>&nbsp;target in </span><span class="c19">appinventor/build.xml</span><span class="c4">.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>You will also need to m</span><span class="c4">odify the build.xml file in the /buildserver/ directory (this is the file at appinventor/buildserver/build.xml) to include a line for your jar file in the list of &lt;copy&gt; tags under the “BuildServer” target.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">Only one modification should be necessary to add your jar file to the list of &lt;copy&gt; tag declarations.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 708.00px; height: 73.00px;"><img alt="" src="./How to Add a Component_files/esmNOMlVVMO3HMd8_FnFzBr9HvoBmv8e8sgOT8iFj9a4aYySaFVWYClP1wSYIzOqhwA7DU78aC2OlWgr1YT1kZnnFRta-cUaweaJrGVYdyu7JccsS4k.png" style="width: 708.00px; height: 73.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c4">The format for this &lt;copy&gt; entry should be the following:</span></p><p class="c1 c7"><span class="c8"></span></p><p class="c1"><span class="c15">&lt;copy toFile=”${classes.files.dir}/</span><span class="c53 c15 c56">simplifiedNameForJARFile.jar</span><span class="c25 c15">”</span></p><p class="c1"><span class="c15">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; file=”${lib.dir}/</span><span class="c53 c15 c56">subfolderNameFromStep1</span><span class="c15">/</span><span class="c53 c15 c56">nameOfJARFileToAdd.jar</span><span class="c25 c15">” /&gt;</span></p><p class="c1 c7"><span class="c15 c25"></span></p><p class="c1"><span>Note: in each &lt;copy&gt; tag, the </span><span class="c23">file</span><span>&nbsp;attribute refers to the path at which you placed your jar file in appinventor/lib. The “${lib.dir}” equates to “appinventor/lib”. The </span><span class="c23">toFile</span><span class="c4">&nbsp;attribute states the path into which the file will be copied during the ant build process. The “${classes.files.dir}” refers to the path “appinventor/buildserver/build/classes/BuildServer/files”. After the ant script finishes executing the BuildServer ant target, you should be able to navigate to appinventor/buildserver/build/classes/BuildServer/files and verify that your jar file did indeed get copied.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>Note that all these changes are necessary to use the ant build system in the command line. If you use an IDE such as Eclipse, you will also need to add the new jar files in the </span><span class="c23">Build Path</span><span>&nbsp;or your project.</span></p><h3 class="c22" id="h.fbmmsngpnimu"><span>Using the library in your component</span></h3><p class="c1"><span class="c4">Your component should contain a “@UsesLibraries” &nbsp;annotation, for example:</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1 c49"><span class="c25 c15">@UsesLibraries(libraries = "library1.jar," + &nbsp;“library2.jar,” + … + “libraryN.jar”)</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>Place the annotation before the class definition. &nbsp;See the </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/runtime/Twitter.java&amp;sa=D&amp;ust=1539767441520000">Twitter.java</a></span><span>&nbsp;or the </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/components/src/com/google/appinventor/components/runtime/FusiontablesControl.java&amp;sa=D&amp;ust=1539767441521000">FusiontablesControl.java</a></span><span>&nbsp;components in the com.google.appinventor.components.runtime package.</span></p><p class="c1 c7"><span class="c4"></span></p><h3 class="c22 c60" id="h.367tgvyrxp9k"><span class="c24">Using Native Libraries</span></h3><p class="c1"><span>In some occasions y</span><span class="c4">ou might want to use Native libraries as opposed to jar packaged ones. The following annotation can be used for that purpose.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1 c57"><span class="c25 c15">@UsesNativeLibraries(libraries = "library1.so," + &nbsp;“library2.so,” + … + “libraryN.so”)</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span>The files themselves will also need to be added to the lib folder, and taken care of in the build.xml files. </span><span>For a complete example </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/pull/137&amp;sa=D&amp;ust=1539767441523000">look at the instructions</a></span><span class="c4">&nbsp;in this closed pull request.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><h2 class="c39" id="h.qf7nin2dl4lw"><span>4i. Testing</span></h2><h3 class="c22" id="h.auqte6aqsygm"><span class="c24">Browser tests</span></h3><p class="c1"><span>If you did anything nontrivial when adding your </span><span>mock component</span><span class="c4">, you should test their behavior in current and previous majors releases of all of the browsers we support: Chrome, Firefox, Internet Explorer, and Safari. &nbsp;We neglected to do this when adding the Shape property to Buttons, causing incorrect displays in Firefox and Internet Explorer.</span></p><h3 class="c22" id="h.ej7z36kq785l"><span class="c24">Unit tests of static methods</span></h3><p class="c1"><span>We are strong advocates of unit testing and make use of </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://www.junit.org&amp;sa=D&amp;ust=1539767441524000">JUnit 4</a></span><span>, </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/test-libraries-for-java/&amp;sa=D&amp;ust=1539767441525000">test-libraries-for-Java</a></span><span>, and </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/powermock/&amp;sa=D&amp;ust=1539767441525000">PowerMock</a></span><span>, which are included among our external libraries.</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The easiest types of tests to perform are of static methods. &nbsp;See </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/tests/com/google/appinventor/components/runtime/ClockTest.java&amp;sa=D&amp;ust=1539767441526000">ClockTest</a></span><span>, </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/tests/com/google/appinventor/components/runtime/WebTest.java&amp;sa=D&amp;ust=1539767441526000">WebTest</a></span><span>, and most of the files in the </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/%23appinventor%252Fcomponents%252Ftests%252Fcom%252Fgoogle%252Fappinventor%252Fcomponents%252Fruntime%252Futil&amp;sa=D&amp;ust=1539767441527000">utils</a></span><span>&nbsp;subdirectory for examples. &nbsp;We use the annotation </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/annotations/VisibleForTesting.html&amp;sa=D&amp;ust=1539767441527000">@VisibleForTesting</a></span><span class="c4">&nbsp;in code being tested when we loosen visibility restrictions to enhance testability.</span></p><h3 class="c68" id="h.s1ej61821ifa"><span class="c24">Unit tests of instantiated components</span></h3><p class="c1"><span>More difficult but extremely valuable are tests of instantiated components. &nbsp;One example is </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/tests/com/google/appinventor/components/runtime/BluetoothConnectionBaseTest.java&amp;sa=D&amp;ust=1539767441528000">BuletoothConnectionBaseTest</a></span><span>, which instantiates an anonymous subclass of </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/BluetoothConnectionBase.html&amp;sa=D&amp;ust=1539767441528000">BluetoothConnectionBase</a></span><span class="c4">&nbsp;overriding certain methods that would not be testable without an actual bluetooth connection (and thus not suitable for unit testing).</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>Ordinarily, one cannot fully </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://en.wikipedia.org/wiki/Mock_object&amp;sa=D&amp;ust=1539767441529000">mock</a></span><span>&nbsp;objects with static, final, or private methods; however, it is possible with </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/powermock/&amp;sa=D&amp;ust=1539767441529000">PowerMock</a></span><span>. &nbsp;</span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/tests/com/google/appinventor/components/runtime/SpriteTest.java&amp;sa=D&amp;ust=1539767441530000">SpriteTest</a></span><span>&nbsp;uses this functionality to create “nice” mocks of a number of classes, including </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/os/Handler.html&amp;sa=D&amp;ust=1539767441530000">android.os.Handler</a></span><span>&nbsp;and </span><span class="c11"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/view/View.html&amp;sa=D&amp;ust=1539767441530000">android.view.View</a></span><span class="c4">. &nbsp;(Whereas a strict mock throws exceptions when unimplemented methods are called, nice mocks come with default methods that do nothing except return “empty” values, such as 0, false, or the empty string.)</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>The challenge in testing Sprite is that each instance has a </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/Canvas.html&amp;sa=D&amp;ust=1539767441531000">Canvas</a></span><span>&nbsp;(which is passed to the constructor), which acts as a container for the Sprite, and an </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://developer.android.com/reference/android/os/Handler.html&amp;sa=D&amp;ust=1539767441531000">android.os.Handler</a></span><span>&nbsp;(which is instantiated in the constructor), to which requests are posted. &nbsp;To test Sprite, </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://javadoc.app-inventor-releases.googlecode.com/hg/com/google/appinventor/components/runtime/Sprite.html%23Sprite%2528com.google.appinventor.components.runtime.ComponentContainer,%2520android.os.Handler%2529&amp;sa=D&amp;ust=1539767441532000">an alternate version of the constructor</a></span><span>&nbsp;was created, in which both the Canvas and Handler are parameters (enabling mocks to be used). &nbsp;We did not wish to test &nbsp;these latter classes but only to have them provide the methods called by the parts of Sprite under test. &nbsp;</span><span class="c16"><a class="c0" href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#id.geys6c1ge48f">Figure 13</a></span><span>&nbsp;provides an excerpt from </span><span class="c16"><a class="c0" href="https://www.google.com/url?q=http://code.google.com/p/app-inventor-releases/source/browse/appinventor/components/tests/com/google/appinventor/components/runtime/SpriteTest.java&amp;sa=D&amp;ust=1539767441533000">SpriteTest.java</a></span><span class="c4">&nbsp;showing how the mocks are created and giving an example of their use to verify that it detects a collision between a pair of Sprites.</span></p><p class="c1 c7"><span class="c4"></span></p><a id="t.5fab3e9f52ba2e95837ecc355989daa320828bd1"></a><a id="t.12"></a><table class="c47"><tbody><tr class="c26"><td class="c20" colspan="1" rowspan="1"><p class="c1"><span class="c3">The following annotation is required when using PowerMock.</span></p><p class="c1"><span class="c10">@RunWith(PowerMockRunner.class)</span></p><p class="c1 c7"><span class="c13"></span></p><p class="c1"><span class="c3">The following annotation indicates what classes will get mocked.</span></p><p class="c1"><span class="c10">@PrepareForTest({ Canvas.class, Handler.class, Form.class, View.class })</span></p><p class="c1"><span class="c10">public class SpriteTest {</span></p><p class="c1"><span class="c10">&nbsp; :</span></p><p class="c1"><span class="c3">&nbsp; &nbsp; Create nice mocks of each of the following classes:</span></p><p class="c1"><span class="c10">&nbsp; private final Form formMock = PowerMock.createNiceMock(Form.class);</span></p><p class="c1"><span class="c10">&nbsp; private final View canvasViewMock = PowerMock.createNiceMock(View.class);</span></p><p class="c1"><span class="c10">&nbsp; private final Canvas canvasMock = PowerMock.createNiceMock(Canvas.class);</span></p><p class="c1"><span class="c10">&nbsp; private final Handler handlerMock =<br> &nbsp; &nbsp; &nbsp;PowerMock.createNiceMock(Handler.class);</span></p><p class="c1 c7"><span class="c10"></span></p><p class="c1"><span class="c4">&nbsp; &nbsp; Create subclass of Sprite for testing, overriding certain methods (not shown) to keep them<br> &nbsp; &nbsp;from calling unavailable and unnecessary methods.</span></p><p class="c1"><span class="c10">&nbsp; static class TestSprite extends Sprite {</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; :</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; public static TestSprite createTestSprite(Canvas canvas, <br> &nbsp; &nbsp; &nbsp; &nbsp;Handler handler) {<br> &nbsp; &nbsp; &nbsp;return new TestSprite(canvas, handler);</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; }</span></p><p class="c1 c7"><span class="c10"></span></p><p class="c1"><span class="c10">&nbsp; &nbsp; public static TestCreate createTestSprite(Canvas canvas,</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; Handler handler, int h, int w) {</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; TestSprite sprite = createTestSprite(canvas, handler);</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; sprite.height = h;</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; sprite.width = w;</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; return sprite;</span></p><p class="c1"><span class="c10">&nbsp; }</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c19 c36">&nbsp; @Before</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&nbsp; ← Annotation is for JUnit</span></p><p class="c1"><span class="c10">&nbsp; public void setUp() throws Exception {</span></p><p class="c1"><span class="c3">&nbsp; &nbsp; &nbsp; Specifies that (once the mock is in playback mode), whenever canvasMock.getView() is</span></p><p class="c1"><span class="c3">&nbsp; &nbsp; &nbsp; called, the return value should be canvasViewMock.</span></p><p class="c1"><span class="c23">&nbsp; &nbsp; &nbsp; </span><span class="c10">EasyMock.expect(canvasMock.getView()).andReturn(canvasViewMock)</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.anyTimes();</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span class="c3">&nbsp; &nbsp; &nbsp;Specifies that (once the mock is in playback mode), whenever canvasMock.$form() is</span></p><p class="c1"><span class="c3">&nbsp; &nbsp; &nbsp;called, the return value should be formMock.</span></p><p class="c1"><span class="c10">&nbsp; &nbsp;EasyMock.expect(canvasMock.$form()).andReturn(formMock).anyTimes();</span></p><p class="c1 c7"><span class="c4"></span></p><p class="c1"><span>&nbsp; &nbsp; &nbsp;</span><span class="c3">Specifies that the following mocks should enter playback mode.</span></p><p class="c1"><span class="c10">&nbsp; &nbsp;EasyMock.replay(canvasViewMock, canvasMock, handlerMock);</span></p><p class="c1"><span class="c10">&nbsp;}</span></p><p class="c1 c7"><span class="c10"></span></p><p class="c1"><span class="c19 c36">&nbsp;@Test</span><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c23">&nbsp; ← Annotation is for JUnit</span></p><p class="c1"><span class="c10">&nbsp;public void testCollidingCatMouse() throws Exception {</span></p><p class="c1"><span class="c10">&nbsp; &nbsp;TestSprite cat = TestSprite.createTestSprite(canvasMock, handlerMock,</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp;CAT_HEIGHT, CAT_WIDTH);</span></p><p class="c1"><span class="c10">&nbsp; &nbsp;cat.MoveTo(95,83);</span></p><p class="c1 c7"><span class="c10"></span></p><p class="c1"><span class="c10">&nbsp; &nbsp;TestSprite mouse = TestSprite.createTestSprite(canvasMock, handlerMock,</span></p><p class="c1"><span class="c10">&nbsp; &nbsp; &nbsp; &nbsp;MOUSE_HEIGHT, MOUSE_WIDTH);</span></p><p class="c1"><span class="c10">&nbsp; &nbsp;mouse.MoveTo(98, 86);</span></p><p class="c1 c7"><span class="c10"></span></p><p class="c1"><span class="c10">&nbsp; &nbsp;assertTrue(Sprite.colliding(cat, mouse);</span></p><p class="c1"><span class="c10">&nbsp; &nbsp;assertTrue(Sprite.colliding(mouse, cat);</span></p><p class="c1"><span class="c10">&nbsp;}</span></p><p class="c1"><span class="c10">}</span></p><p class="c1 c7"><span class="c4"></span></p><a id="id.geys6c1ge48f"></a><p class="c9"><span class="c3">Figure 13: Excerpt from SpriteTest illustrating use of PowerMock</span></p></td></tr></tbody></table><h3 class="c22" id="h.lvy4xzcgqetx"><span class="c24">System tests</span></h3><p class="c1"><span class="c4">You should also have at least two sample applications using your new component and manually test that you can build, compile, and run them using your development server.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><h1 class="c59 c60" id="h.g7yi5132bgkf"><span class="c25 c61">5. Ordering components within a palette category</span></h1><p class="c1 c31"><span>To be written (Andrew)</span></p><h1 class="c59 c60" id="h.sajmtj7l1183"><span class="c25 c61">6. Internationalization</span></h1><p class="c1 c31"><span class="c4">Names of methods, events, and properties need to be internationalized so that they can appear in several languages. &nbsp;Don’t use hard-coded strings for these names. &nbsp;Instead, add variables in OdeMessages.java. &nbsp;Similarly for component descriptions.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span>Add an entry for each new property/event/method into OdeMessages.java (unless the same name is already being used in some other component. For example, to add the </span><span class="c23 c53">"Foo"</span><span class="c4">&nbsp;property you would add:</span></p><p class="c1 c31 c7"><span class="c4"></span></p><a id="t.268dcb0f00043e2143de530dc5ed3882dfd5e344"></a><a id="t.13"></a><table class="c47"><tbody><tr class="c26"><td class="c63" colspan="1" rowspan="1"><p class="c1 c31"><span class="c8">@DefaultMessage("Foo")</span></p><p class="c1 c31"><span class="c8">@Description("This the name of the wonderful Foo property")</span></p><p class="c1 c31"><span class="c8">String FooProperties();</span></p></td></tr></tbody></table><p class="c1 c7 c31"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span class="c4">The process would be the same for FooMethods() and FooEvents() when adding methods and events.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span>The localized strings for the different languages can be located in: </span><span class="c23 c53">appinventor/appengine/src/com/google/appinventor/client.OdeMessages&lt;language&gt;.properties</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span class="c4">The system is designed so that if there is no translation, then English will be used. &nbsp;If you cannot supply translations for other languages when you implement the properties, the translations can be added later.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span>If you add or edit &nbsp;the description of a component, you must </span><span class="c23 c53">also</span><span class="c4">&nbsp;find and update the description in OdeMessages.java. It’s not enough to edit to description attribute in the @DesignerComponent annotation. You must also edit (or add) the HelpStringComponentPallette variable in OdeMessages.java. &nbsp;For example, here’s the description for a Spinner in the annotation:</span></p><p class="c1 c31 c7"><span class="c4"></span></p><a id="t.1829b8362d6c0204e485b1d5a0f32df12d445cc6"></a><a id="t.14"></a><table class="c47"><tbody><tr class="c26"><td class="c63" colspan="1" rowspan="1"><p class="c1 c31"><span class="c8">description = "&lt;p&gt;A spinner component that displays a pop-up with a list of elements." +</span></p><p class="c1 c31"><span class="c8">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" These elements can be set in the Designer or Blocks Editor by setting the" +</span></p><p class="c1 c31"><span class="c8">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&lt;code&gt;ElementsFromString&lt;/code&gt; property to a string-separated concatenation" +</span></p><p class="c1 c31"><span class="c8">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" (for example, &lt;em&gt;choice 1, choice 2, choice 3&lt;/em&gt;) or by setting the " +</span></p><p class="c1 c31"><span class="c36">&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&lt;code&gt;Elements&lt;/code&gt; property to a List in the Blocks editor. "</span></p></td></tr></tbody></table><p class="c1 c31 c7"><span class="c8"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span>T</span><span class="c4">he following definition is also needed in OdeMessages:</span></p><p class="c1 c31 c7"><span class="c8"></span></p><a id="t.5b7c967de82df923672799d2747179fbe4853da3"></a><a id="t.15"></a><table class="c47"><tbody><tr class="c26"><td class="c63" colspan="1" rowspan="1"><p class="c1 c30"><span class="c8">@DefaultMessage("&lt;p&gt;A spinner component that displays a pop-up with a list of elements. These elements can be set in the Designer or Blocks Editor by setting the&lt;code&gt;ElementsFromString&lt;/code&gt; property to a string-separated concatenation (for example, &lt;em&gt;choice 1, choice 2, choice 3&lt;/em&gt;) or by setting the &lt;code&gt;Elements&lt;/code&gt; property to a List in the Blocks editor.&lt;/p&gt;")</span></p><p class="c1 c30"><span class="c8">@Description("")</span></p><p class="c1 c30"><span class="c8">String SpinnerHelpStringComponentPallette();</span></p></td></tr></tbody></table><p class="c1 c31 c7"><span class="c8"></span></p><p class="c1 c31"><span class="c4">If your method or event has a parameter, then you need to add translations for that name in the method or event block. Note that the parameter names are shared among all the component blocks, so there is a good chance your parameter name has already been translated. If you do need to add a new parameter name, say “specialResultName”, you should add that to OdeMessages.java:</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><a id="t.7d064d297418093930a4c0e70128de4f6b214171"></a><a id="t.16"></a><table class="c47"><tbody><tr class="c26"><td class="c63" colspan="1" rowspan="1"><p class="c1 c31"><span class="c8">&nbsp; @DefaultMessage("specialResultName")</span></p><p class="c1 c31"><span class="c8">&nbsp; @Description("name of the special result parameter")</span></p><p class="c1 c31"><span class="c8">&nbsp; String specialResultNameParams();</span></p></td></tr></tbody></table><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span class="c4">then make an entry in</span></p><p class="c1 c31"><span class="c4">./appengine/src/com/google/appinventor/client/TranslationComponentParams.java</span></p><p class="c1 c31"><span class="c4">as follows:</span></p><p class="c1 c30"><span class="c23 c45">map.put("specialResultName", MESSAGES.specialResultNameParams());</span></p><p class="c1 c31"><span class="c4">and then add localized strings for “specialResutlName” to the OdeMessages&lt;language&gt;.properties</span></p><h1 class="c59 c60" id="h.690wgh24dkbc"><span>7. </span><span class="c25 c61">Supporting legacy devices</span></h1><p class="c1 c31"><span class="c4">Everyone always likes to have the newest phone. &nbsp;But many App Inventor users, especially schools, have older devices. &nbsp; As of summer 2015, about 5% of App Inventor users are using App Inventor with phones running Android system 2.3 (Gingerbread) or older. &nbsp; When you build components, you should design them so that they run on system 2.3 (API level 9). &nbsp; Of course, that is not always possible: many modern Android features require higher API levels, so you should make sure your components give good error messages or fail gracefully on older phones, and there a various approaches for doing this. &nbsp; </span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span class="c4">When you use a new feature, you should check the Android developer documentation to see the API level where it was introduced. &nbsp;If it is later than 9, your component should test the API level of the device it is running on, and act appropriately. &nbsp; You can use SDKLevel.getLevel() to check the operating system of the device.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span class="c4">One thing you might do if the device it too old to do some operation is to simply alert the end user that the feature won’t work. &nbsp; &nbsp;Another method is to create alternative versions of the operation for running on older phones. &nbsp;You can find examples of both of these techniques in the App Inventor source code.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31"><span class="c4">Whatever approach you use, you should test your work on system 2.3 (or even earlier!) before submitting it for review. &nbsp; If you don’t have an old phone, you can use the Android SDK manager to create emulators running older Android versions.</span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c31 c7"><span class="c4"></span></p><p class="c1 c7"><span class="c4"></span></p><hr class="c65"><div><p class="c1"><a href="https://docs.google.com/document/d/1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw/pub#ftnt_ref1" id="ftnt1">[1]</a><span class="c8">&nbsp;An alternate expansion is “Yet Another Intermediate Language”.</span></p></div></div><div id="footer"><span>Published by <a target="_blank" title="Learn more about Google Drive" href="https://docs.google.com/">Google Drive</a></span><span class="dash">–</span><a href="https://docs.google.com/abuse?id=1xk9dMfczvjbbwD-wMsr-ffqkTlE3ga0ocCE1KOb2wvw">Report Abuse</a><span class="dash">–</span><span>Updated automatically every 5 minutes</span></div><script type="text/javascript">(function(){Object.defineProperty(e,"rwt",{value:function(){return!0},writable:!1,configurable:!1})})();</script><script type="text/javascript" nonce="">(function(){var aa="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca;if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var ea;a:{var fa={s:!0},ha={};try{ha.__proto__=fa;ea=ha.s;break a}catch(a){}ea=!1}ca=ea?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ia=ca;
function k(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ia)ia(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.j=b.prototype}function ja(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ka="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function la(a){if(a){for(var b=aa,c=["WeakMap"],d=0;d<c.length-1;d++){var e=c[d];e in b||(b[e]={});b=b[e]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&ka(b,c,{configurable:!0,writable:!0,value:a})}}function m(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
la(function(a){function b(a){this.a=(g+=Math.random()+1).toString();if(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];for(a=b?b.call(a):{next:ja(a)};!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(){}function d(a){m(a,f)||ka(a,f,{value:new c})}function e(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof c)return a;d(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=
d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(da){return!1}}())return a;var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var g=0;b.prototype.set=function(a,b){d(a);if(!m(a,f))throw Error("WeakMap key fail: "+a);a[f][this.a]=b;return this};b.prototype.get=function(a){return m(a,f)?a[f][this.a]:void 0};b.prototype.has=function(a){return m(a,f)&&m(a[f],this.a)};b.prototype.delete=function(a){return m(a,f)&&m(a[f],this.a)?delete a[f][this.a]:
!1};return b});var n=this;function ma(){}
function p(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function na(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function oa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}
function pa(a,b){function c(){}c.prototype=b.prototype;a.j=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.w=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function qa(a){qa[" "](a);return a}qa[" "]=ma;function ra(a,b,c){return Object.prototype.hasOwnProperty.call(a,b)?a[b]:a[b]=c(b)};function sa(a){return ra(a.prototype,"$$generatedClassName",function(){return"Class$obf_"+{valueOf:function(){return++ta}}})}var ta=1E3;function q(){}q.prototype.g=function(){return ua(this)};q.prototype.toString=function(){return t(u(v(this.constructor)))+"@"+t((this.g()>>>0).toString(16))};function w(){this.a=!1}k(w,q);w.prototype.f=function(a){return Error(a)};function va(a,b){a.b=b;if(null!=b)try{b.o=a}catch(c){}}function wa(a){if(a.a&&"__noinit__"!==a.b){var b=null==a.c?null:a.c.replace(/\n/g,"\u200b\n");b=xa(a,b);b=a.f(b);if(!("stack"in b))try{throw b;}catch(c){}va(a,b)}}w.prototype.toString=function(){return xa(this,this.c)};function xa(a,b){a=u(v(a.constructor));return null==b?a:t(a)+": "+t(b)};function ya(){this.a=!1}k(ya,w);function za(){this.a=!1}k(za,ya);function ua(a){return a.l||(Object.defineProperties(a,{l:{value:++Aa,enumerable:!1}}),a.l)}var Aa=0;function Ba(){this.a=!1}k(Ba,za);function Ca(){this.a=!1}k(Ca,Ba);Ca.prototype.f=function(a){return new TypeError(a)};function Da(a,b){return"string"==typeof a?a.charCodeAt(b):a.C(b)};function t(a){if(null==a)a="null";else if(a instanceof Array){var b=a.v;a=u(b?v(b.B,b.A):v(q,1))+"@"+(ua(a)>>>0).toString(16)}else a=a.toString();return a}function Ea(a){if(65536<=a){var b=56320+(a-65536&1023)&65535;return t(String.fromCharCode(55296+(a-65536>>10&1023)&65535))+t(String.fromCharCode(b))}return String.fromCharCode(a&65535)}
function Fa(a,b){var c=b,d=a.length;b=Da(a,c++);var e;if(d=55296<=b&&56319>=b&&c<d)a=e=Da(a,c),d=56320<=a&&57343>=a;var f;d?f=65536+((b&1023)<<10)+(e&1023):f=b;return f}function Ga(a,b){return a===b||null==a&&null==b};function Ha(a,b){this.b=a;this.a=b}k(Ha,q);function u(a){var b=sa(a.b);0!=a.a&&(b="L"+t(b)+";");a=a.a;for(var c="",d=0;d<a;d++)c=t(c)+"[";return t(c)+t(b)}Ha.prototype.toString=function(){return"class "+t(u(this))};function v(a,b){var c=b||0;return ra(a.prototype,"$$class/"+c,function(){return new Ha(a,c)})};function Ia(a,b){return null==a?a:b?decodeURI(a):decodeURIComponent(a)};var Ja=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\S\s]*))?$/;function Ka(a){a=Ja.exec(a);for(var b=[],c=0;7>=c;c++)a.length<=c||null==a[c]?b.push(null):b.push(a[c]);return b}
function La(a,b){var c=Ea(35);c=a.indexOf(c);c=0>c?a.length:c;a:{var d=0;for(var e=b.length;0<(d=a.indexOf(b,d))&&d<c;){var f=Fa(a,d-1);if(38==f||63==f){if(d+e>=a.length)break a;f=Fa(a,d+e);if(61==f||38==f||35==f)break a}d+=e+1}d=-1}if(0>d)return null;e=d;f=Ea(38);e=a.indexOf(f,e);if(0>e||e>c)e=c;d+=b.length+1;b=Math.min(a.length,d);a=a.substr(b,Math.min(a.length,Math.max(d,e))-b);c=" ";for(b=0;0<=(b=c.indexOf("\\",b));)36==c.charCodeAt(b+1)?(d=t(c.substr(0,b))+"$",e=++b,c=d+t(c.substr(e))):(d=t(c.substr(0,
b)),e=++b,c=d+t(c.substr(e)));a=a.replace(/\+/g,c);return Ia(a,!1)};var Ma=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},Na=/&/g,Oa=/</g,Pa=/>/g,Qa=/"/g,Ra=/'/g,Sa=/\x00/g,Ta=/[\x00&<>"']/;function Ua(a,b){return a<b?-1:a>b?1:0};var Va=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"==typeof a)return"string"==typeof b&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};function y(a,b){this.a=[];this.b=b;for(var c=!0,d=a.length-1;0<=d;d--){var e=a[d]|0;c&&e==b||(this.a[d]=e,c=!1)}}var Wa={};function z(a){if(-128<=a&&128>a){var b=Wa[a];if(b)return b}b=new y([a|0],0>a?-1:0);-128<=a&&128>a&&(Wa[a]=b);return b}function A(a){if(isNaN(a)||!isFinite(a))return B;if(0>a)return C(A(-a));for(var b=[],c=1,d=0;a>=c;d++)b[d]=a/c|0,c*=4294967296;return new y(b,0)}var B=z(0),D=z(1),Xa=z(16777216);
function E(a){if(-1==a.b)return-E(C(a));for(var b=0,c=1,d=0;d<a.a.length;d++){var e=F(a,d);b+=(0<=e?e:4294967296+e)*c;c*=4294967296}return b}y.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(G(this))return"0";if(-1==this.b)return"-"+C(this).toString(a);for(var b=A(Math.pow(a,6)),c=this,d="";;){var e=H(c,b);c=I(c,J(e,b));var f=((0<c.a.length?c.a[0]:c.b)>>>0).toString(a);c=e;if(G(c))return f+d;for(;6>f.length;)f="0"+f;d=f+d}};
function F(a,b){return 0>b?0:b<a.a.length?a.a[b]:a.b}function G(a){if(0!=a.b)return!1;for(var b=0;b<a.a.length;b++)if(0!=a.a[b])return!1;return!0}function K(a,b){a=I(a,b);return-1==a.b?-1:G(a)?0:1}function C(a){for(var b=a.a.length,c=[],d=0;d<b;d++)c[d]=~a.a[d];return(new y(c,~a.b)).add(D)}
y.prototype.add=function(a){for(var b=Math.max(this.a.length,a.a.length),c=[],d=0,e=0;e<=b;e++){var f=d+(F(this,e)&65535)+(F(a,e)&65535),g=(f>>>16)+(F(this,e)>>>16)+(F(a,e)>>>16);d=g>>>16;f&=65535;g&=65535;c[e]=g<<16|f}return new y(c,c[c.length-1]&-2147483648?-1:0)};function I(a,b){return a.add(C(b))}
function J(a,b){if(G(a)||G(b))return B;if(-1==a.b)return-1==b.b?J(C(a),C(b)):C(J(C(a),b));if(-1==b.b)return C(J(a,C(b)));if(0>K(a,Xa)&&0>K(b,Xa))return A(E(a)*E(b));for(var c=a.a.length+b.a.length,d=[],e=0;e<2*c;e++)d[e]=0;for(e=0;e<a.a.length;e++)for(var f=0;f<b.a.length;f++){var g=F(a,e)>>>16,h=F(a,e)&65535,l=F(b,f)>>>16,r=F(b,f)&65535;d[2*e+2*f]+=h*r;L(d,2*e+2*f);d[2*e+2*f+1]+=g*r;L(d,2*e+2*f+1);d[2*e+2*f+1]+=h*l;L(d,2*e+2*f+1);d[2*e+2*f+2]+=g*l;L(d,2*e+2*f+2)}for(e=0;e<c;e++)d[e]=d[2*e+1]<<16|
d[2*e];for(e=c;e<2*c;e++)d[e]=0;return new y(d,0)}function L(a,b){for(;(a[b]&65535)!=a[b];)a[b+1]+=a[b]>>>16,a[b]&=65535,b++}
function H(a,b){if(G(b))throw Error("division by zero");if(G(a))return B;if(-1==a.b)return-1==b.b?H(C(a),C(b)):C(H(C(a),b));if(-1==b.b)return C(H(a,C(b)));if(30<a.a.length){if(-1==a.b||-1==b.b)throw Error("slowDivide_ only works with positive integers.");for(var c=D;0>=K(b,a);)c=Ya(c,1),b=Ya(b,1);var d=M(c,1),e=M(b,1);b=M(b,2);for(c=M(c,2);!G(b);){var f=e.add(b);0>=K(f,a)&&(d=d.add(c),e=f);b=M(b,1);c=M(c,1)}return d}for(c=B;0<=K(a,b);){d=Math.max(1,Math.floor(E(a)/E(b)));e=Math.ceil(Math.log(d)/Math.LN2);
e=48>=e?1:Math.pow(2,e-48);f=A(d);for(var g=J(f,b);-1==g.b||0<K(g,a);)d-=e,f=A(d),g=J(f,b);G(f)&&(f=D);c=c.add(f);a=I(a,g)}return c}y.prototype.and=function(a){for(var b=Math.max(this.a.length,a.a.length),c=[],d=0;d<b;d++)c[d]=F(this,d)&F(a,d);return new y(c,this.b&a.b)};y.prototype.or=function(a){for(var b=Math.max(this.a.length,a.a.length),c=[],d=0;d<b;d++)c[d]=F(this,d)|F(a,d);return new y(c,this.b|a.b)};
y.prototype.xor=function(a){for(var b=Math.max(this.a.length,a.a.length),c=[],d=0;d<b;d++)c[d]=F(this,d)^F(a,d);return new y(c,this.b^a.b)};function Ya(a,b){var c=b>>5;b%=32;for(var d=a.a.length+c+(0<b?1:0),e=[],f=0;f<d;f++)e[f]=0<b?F(a,f-c)<<b|F(a,f-c-1)>>>32-b:F(a,f-c);return new y(e,a.b)}function M(a,b){var c=b>>5;b%=32;for(var d=a.a.length-c,e=[],f=0;f<d;f++)e[f]=0<b?F(a,f+c)>>>b|F(a,f+c+1)<<32-b:F(a,f+c);return new y(e,a.b)};function Za(a,b,c){for(var d in a)b.call(c,a[d],d,a)};I(Ya(D,32),D);z(65535);I(Ya(D,128),D);var N;a:{var $a=n.navigator;if($a){var ab=$a.userAgent;if(ab){N=ab;break a}}N=""}function O(a){return-1!=N.indexOf(a)};var bb=O("Opera"),P=O("Trident")||O("MSIE"),cb=O("Edge"),db=cb||P,eb=O("Gecko")&&!(-1!=N.toLowerCase().indexOf("webkit")&&!O("Edge"))&&!(O("Trident")||O("MSIE"))&&!O("Edge"),fb=-1!=N.toLowerCase().indexOf("webkit")&&!O("Edge"),gb=O("Macintosh");function hb(){var a=n.document;return a?a.documentMode:void 0}var ib;
a:{var jb="",kb=function(){var a=N;if(eb)return/rv:([^\);]+)(\)|;)/.exec(a);if(cb)return/Edge\/([\d\.]+)/.exec(a);if(P)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(fb)return/WebKit\/(\S+)/.exec(a);if(bb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();kb&&(jb=kb?kb[1]:"");if(P){var lb=hb();if(null!=lb&&lb>parseFloat(jb)){ib=String(lb);break a}}ib=jb}var mb=ib,nb={},ob;var pb=n.document;ob=pb&&P?hb()||("CSS1Compat"==pb.compatMode?parseInt(mb,10):5):void 0;function S(){this.b=this.b;this.a=this.a}S.prototype.b=!1;S.prototype.m=function(){this.b||(this.b=!0,this.f())};S.prototype.f=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function qb(a){a&&"function"==typeof a.m&&a.m()};function T(){this.b="";this.f=rb}T.prototype.c=!0;T.prototype.a=function(){return this.b};function sb(a){if(a instanceof T&&a.constructor===T&&a.f===rb)return a.b;p(a);return"type_error:SafeUrl"}var tb=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,rb={};function ub(a){var b=new T;b.b=a;return b};function U(){this.b="";this.f=vb}U.prototype.c=!0;U.prototype.a=function(){return this.b};function wb(a){if(a instanceof U&&a.constructor===U&&a.f===vb)return a.b;p(a);return"type_error:SafeHtml"}var vb={};var xb=!P||9<=Number(ob),yb=!P||9<=Number(ob),zb=P&&!ra(nb,"9",function(){for(var a=0,b=Ma(String(mb)).split("."),c=Ma("9").split("."),d=Math.max(b.length,c.length),e=0;0==a&&e<d;e++){var f=b[e]||"",g=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;a=Ua(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||Ua(0==f[2].length,0==g[2].length)||Ua(f[2],g[2]);f=f[3];g=g[3]}while(0==a)}return 0<=a}),
Ab=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{n.addEventListener("test",ma,b),n.removeEventListener("test",ma,b)}catch(c){}return a}();function Bb(a,b){this.type=a;this.a=this.target=b;this.f=!1}Bb.prototype.c=function(){this.f=!0};function V(a,b){Bb.call(this,a?a.type:"");this.relatedTarget=this.a=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.a=b;if(b=a.relatedTarget){if(eb){a:{try{qa(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=
a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=
a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"==typeof a.pointerType?a.pointerType:Cb[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}pa(V,Bb);var Db=[1,4,2],Cb={2:"touch",3:"pen",4:"mouse"};V.prototype.c=function(){V.j.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,zb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Eb="closure_listenable_"+(1E6*Math.random()|0),Fb=0;function Gb(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.capture=!!d;this.b=e;this.key=++Fb;this.h=this.i=!1}function Hb(a){a.h=!0;a.listener=null;a.a=null;a.src=null;a.b=null};function Ib(a){this.src=a;this.a={};this.b=0}Ib.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g;a:{for(g=0;g<a.length;++g){var h=a[g];if(!h.h&&h.listener==b&&h.capture==!!d&&h.b==e)break a}g=-1}-1<g?(b=a[g],c||(b.i=!1)):(b=new Gb(b,this.src,f,!!d,e),b.i=c,a.push(b));return b};var Jb="closure_lm_"+(1E6*Math.random()|0),Kb={},Lb=0;function Mb(a,b,c,d,e){if(d&&d.once)return Nb(a,b,c,d,e);if("array"==p(b)){for(var f=0;f<b.length;f++)Mb(a,b[f],c,d,e);return null}c=Ob(c);return a&&a[Eb]?a.a(b,c,na(d)?!!d.capture:!!d,e):Pb(a,b,c,!1,d,e)}
function Pb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=na(e)?!!e.capture:!!e,h=Qb(a);h||(a[Jb]=h=new Ib(a));c=h.add(b,c,d,g,f);if(c.a)return c;d=Rb();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)Ab||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Sb(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Lb++;return c}
function Rb(){var a=Tb,b=yb?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Nb(a,b,c,d,e){if("array"==p(b)){for(var f=0;f<b.length;f++)Nb(a,b[f],c,d,e);return null}c=Ob(c);return a&&a[Eb]?a.b(b,c,na(d)?!!d.capture:!!d,e):Pb(a,b,c,!0,d,e)}
function Ub(a){if("number"!=typeof a&&a&&!a.h){var b=a.src;if(b&&b[Eb])b.c(a);else{var c=a.type,d=a.a;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Sb(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Lb--;if(c=Qb(b)){d=a.type;if(d in c.a){var e=c.a[d],f=Va(e,a),g;(g=0<=f)&&Array.prototype.splice.call(e,f,1);g&&(Hb(a),0==c.a[d].length&&(delete c.a[d],c.b--))}0==c.b&&(c.src=null,b[Jb]=null)}else Hb(a)}}}
function Sb(a){return a in Kb?Kb[a]:Kb[a]="on"+a}function Vb(a,b,c,d){var e=!0;if(a=Qb(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.h&&(f=Wb(f,d),e=e&&!1!==f)}return e}function Wb(a,b){var c=a.listener,d=a.b||a.src;a.i&&Ub(a);return c.call(d,b)}
function Tb(a,b){if(a.h)return!0;if(!yb){if(!b)a:{b=["window","event"];for(var c=n,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new V(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.a;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;0<=e;e--){b.a=d[e];var f=Vb(d[e],a,!0,b);c=c&&f}for(e=0;e<d.length;e++)b.a=d[e],f=Vb(d[e],a,!1,b),c=c&&f}return c}return Wb(a,
new V(b,this))}function Qb(a){a=a[Jb];return a instanceof Ib?a:null}var Xb="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ob(a){if("function"==p(a))return a;a[Xb]||(a[Xb]=function(b){return a.handleEvent(b)});return a[Xb]};function W(a){S.call(this);this.g=a;this.c={}}pa(W,S);var Yb=[];function Zb(a){Za(a.c,function(a,c){this.c.hasOwnProperty(c)&&Ub(a)},a);a.c={}}W.prototype.f=function(){W.j.f.call(this);Zb(this)};W.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function $b(a){S.call(this);this.c=a||document.body;this.g=new W(this);a=oa(qb,this.g);this.b?a():(this.a||(this.a=[]),this.a.push(a));a=this.g;var b=this.c,c=this.u,d="click";"array"!=p(d)&&(d&&(Yb[0]=d.toString()),d=Yb);for(var e=0;e<d.length;e++){var f=Mb(b,d[e],c||a.handleEvent,!1,a.g||a);if(!f)break;a.c[f.key]=f}}pa($b,S);
$b.prototype.u=function(a){if((xb?0==a.b.button:"click"==a.type||a.b.button&Db[0])&&!(fb&&gb&&a.ctrlKey)&&!a.f)for(var b=a.target;b&&b!=this.c;){if(b.tagName&&"a"==b.tagName.toLowerCase()){var c=b.getAttribute("href")||b.getAttributeNS("http://www.w3.org/1999/xlink","href"),d=c;var e=d;try{var f=void 0,g=Ka(d)[3];f=null==g?null:g;var h=Ia(f,!0);var l;if(l=Ga("www.google.com",h)){var r=Ka(d)[5];l=Ga("/url",Ia(r,!0))}if(l){var da=La(d,"q");e=da?da:La(d,"url")}}catch(Q){a:{d=Q;if(null!=d&&(f=d.o,null!=
f)){Q=f;break a}if(d instanceof TypeError){var x=f=new Ca,R=x;R.a=!0;R.b="__noinit__";wa(x);va(x,d);x.c=t(d);d=f}else R=x=f=new Ba,R.a=!0,R.b="__noinit__",wa(x),va(x,d),x.c=t(d),d=f;Q=d}if(!(Q instanceof ya))throw Q.b;}e=null!=e?e:"";if(c!=e){l=void 0;g=e;b={target:"_blank",noreferrer:!0};c=window;g instanceof T?h=g:(h="undefined"!=typeof g.href?g.href:String(g),h instanceof T||(h="object"==typeof h&&h.c?h.a():String(h),tb.test(h)||(h="about:invalid#zClosurez"),h=ub(h)));g=b.target||g.target;r=[];
for(l in b)switch(l){case "width":case "height":case "top":case "left":r.push(l+"="+b[l]);break;case "target":case "noopener":case "noreferrer":break;default:r.push(l+"="+(b[l]?1:0))}l=r.join(",");(O("iPhone")&&!O("iPod")&&!O("iPad")||O("iPad")||O("iPod"))&&c.navigator&&c.navigator.standalone&&g&&"_self"!=g?(r=l=c.document.createElement("A"),h instanceof T||h instanceof T||(h="object"==typeof h&&h.c?h.a():String(h),tb.test(h)||(h="about:invalid#zClosurez"),h=ub(h)),r.href=sb(h),l.setAttribute("target",
g),b.noreferrer&&l.setAttribute("rel","noreferrer"),b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!0,c,1),l.dispatchEvent(b)):b.noreferrer?(c=c.open("",g,l),b=sb(h),c&&(db&&-1!=b.indexOf(";")&&(b="'"+b.replace(/'/g,"%27")+"'"),c.opener=null,Ta.test(b)&&(-1!=b.indexOf("&")&&(b=b.replace(Na,"&amp;")),-1!=b.indexOf("<")&&(b=b.replace(Oa,"&lt;")),-1!=b.indexOf(">")&&(b=b.replace(Pa,"&gt;")),-1!=b.indexOf('"')&&(b=b.replace(Qa,"&quot;")),-1!=b.indexOf("'")&&(b=b.replace(Ra,"&#39;")),
-1!=b.indexOf("\x00")&&(b=b.replace(Sa,"&#0;"))),h=new U,h.b='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+b+'">',c.document.write(wb(h)),c.document.close())):(c=c.open(sb(h),g,l))&&b.noopener&&(c.opener=null);a.c();break}}b=b.parentNode}};function ac(a){new $b(a)}var X=["DOCS_installLinkReferrerSanitizer"],Y=n;X[0]in Y||"undefined"==typeof Y.execScript||Y.execScript("var "+X[0]);
for(var Z;X.length&&(Z=X.shift());)X.length||void 0===ac?Y[Z]&&Y[Z]!==Object.prototype[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=ac;}).call(this);
</script><script type="text/javascript" nonce="">DOCS_installLinkReferrerSanitizer();</script><div id="Vidown_extension_alhnopeoagjmjfgcbnokcnagkecgdcdh" style="display: none;"></div><div id="vidown_float_panel_div" style="display: none;"><a id="vidown_float_panel_download" title="用【维棠】下载视频">维棠下载</a><span id="vidown_float_panel_sep">|</span><input type="button" value=" " id="vidown_float_panel_close" title="关闭"></div></body></html>